import{j as e}from"./ui-vendor-C0wu6Ixu.js";import{r as f}from"./react-vendor-CaWBk0BP.js";import{C as n,a as i,b as o,c as d}from"./card-Dm6-Ikt0.js";import{B as g}from"./button-D17X8cRn.js";import{A as S,a as C,b as E}from"./avatar-DXDRPwpH.js";import{B as b}from"./badge-DETtUbOb.js";import{S as y}from"./separator-TFD041mq.js";import{E as B}from"./external-link-gl7kX3dg.js";import{S as v}from"./share-manager-BsQqdDUE.js";import{a as w,b as k}from"./export-features-Bjk4ojhA.js";import{a as u}from"./index-WJiHffTg.js";import{a as D}from"./router-vendor-CjcZkGkV.js";import{L as N}from"./loader-circle-C-FtpdMo.js";import{C as T}from"./circle-alert-3PTuTpgo.js";import{S as U}from"./share-2-CvgEI64U.js";import"./supabase-vendor-ChaIFbZk.js";import"./query-vendor-Dx0-x9wB.js";function R({sharedContent:c}){var h,m;const{content:s,owner:t}=c;return e.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[e.jsx(n,{children:e.jsxs(i,{children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(S,{className:"h-12 w-12",children:[e.jsx(C,{src:t.avatarUrl,alt:t.displayName}),e.jsx(E,{children:((h=t.displayName)==null?void 0:h.charAt(0))||((m=t.handle)==null?void 0:m.charAt(0))||"U"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.title}),e.jsxs("p",{className:"text-muted-foreground",children:["Shared by ",t.displayName||t.handle||"Anonymous"]})]})]}),s.tagline&&e.jsx("p",{className:"text-lg text-muted-foreground italic mt-2",children:s.tagline})]})}),s.voiceTone.length>0&&e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(o,{children:"Voice & Tone"})}),e.jsx(d,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.voiceTone.map((r,a)=>e.jsx(b,{variant:"secondary",children:r},a))})})]}),s.signaturePhrases.length>0&&e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(o,{children:"Signature Phrases"})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-2",children:s.signaturePhrases.map((r,a)=>e.jsxs("blockquote",{className:"border-l-4 border-primary pl-4 italic",children:['"',r,'"']},a))})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.strengths.length>0&&e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(o,{children:"Strengths"})}),e.jsx(d,{children:e.jsx("ul",{className:"space-y-2",children:s.strengths.map((r,a)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-500 mt-1",children:"✓"}),e.jsx("span",{children:r})]},a))})})]}),s.weaknesses.length>0&&e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(o,{children:"Areas for Growth"})}),e.jsx(d,{children:e.jsx("ul",{className:"space-y-2",children:s.weaknesses.map((r,a)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-orange-500 mt-1",children:"→"}),e.jsx("span",{children:r})]},a))})})]})]}),s.palette.length>0&&e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(o,{children:"Color Palette"})}),e.jsx(d,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:s.palette.map((r,a)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-full h-16 rounded-lg border shadow-sm mb-2",style:{backgroundColor:r.hex}}),e.jsx("p",{className:"text-sm font-medium",children:r.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.hex})]},a))})})]}),e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(o,{children:"Typography"})}),e.jsx(d,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Heading Font"}),e.jsxs("div",{className:"p-4 border rounded-lg",style:{fontFamily:s.fonts.heading},children:[e.jsx("p",{className:"text-2xl font-bold",children:s.fonts.heading}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"The quick brown fox jumps over the lazy dog"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Body Font"}),e.jsxs("div",{className:"p-4 border rounded-lg",style:{fontFamily:s.fonts.body},children:[e.jsx("p",{className:"text-lg",children:s.fonts.body}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"The quick brown fox jumps over the lazy dog"})]})]})]})})]}),s.bio&&e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(o,{children:"Bio"})}),e.jsx(d,{children:e.jsx("p",{className:"leading-relaxed",children:s.bio})})]}),s.examples&&s.examples.length>0&&e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(o,{children:"Usage Examples"})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:s.examples.map((r,a)=>e.jsxs("div",{className:"border-l-4 border-primary pl-4",children:[e.jsx("h4",{className:"font-semibold text-sm text-muted-foreground mb-1",children:r.context}),e.jsxs("blockquote",{className:"italic",children:['"',r.text,'"']})]},a))})})]}),e.jsxs("div",{className:"text-center py-6",children:[e.jsx(y,{className:"mb-4"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Shared on ",c.createdAt.toLocaleDateString(),c.expiresAt&&e.jsxs("span",{children:[" • Expires ",c.expiresAt.toLocaleDateString()]})]})]})]})}function V({sharedContent:c}){var h,m;const{content:s,owner:t}=c;return e.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[e.jsx(n,{children:e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(S,{className:"h-12 w-12",children:[e.jsx(C,{src:t.avatarUrl,alt:t.displayName}),e.jsx(E,{children:((h=t.displayName)==null?void 0:h.charAt(0))||((m=t.handle)==null?void 0:m.charAt(0))||"U"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:s.name}),e.jsx("h2",{className:"text-xl text-muted-foreground",children:s.role}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Shared by ",t.displayName||t.handle||"Anonymous"]})]})]})})}),s.summary&&e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(o,{children:"Summary"})}),e.jsx(d,{children:e.jsx("p",{className:"leading-relaxed text-lg",children:s.summary})})]}),s.experience.length>0&&e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(o,{children:"Experience"})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-6",children:s.experience.map((r,a)=>e.jsxs("div",{className:"relative",children:[a>0&&e.jsx(y,{className:"mb-6"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:r.role}),e.jsx(b,{variant:"outline",className:"w-fit",children:r.dates})]}),e.jsx("p",{className:"text-lg text-muted-foreground font-medium",children:r.org}),e.jsx("ul",{className:"space-y-2 mt-4",children:r.bullets.map((j,p)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-primary mt-2 text-xs",children:"●"}),e.jsx("span",{className:"leading-relaxed",children:j})]},p))})]})]},a))})})]}),s.skills.length>0&&e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(o,{children:"Skills"})}),e.jsx(d,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.skills.map((r,a)=>e.jsx(b,{variant:"secondary",className:"text-sm",children:r},a))})})]}),s.links.length>0&&e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(o,{children:"Links"})}),e.jsx(d,{children:e.jsx("div",{className:"grid sm:grid-cols-2 gap-4",children:s.links.map((r,a)=>e.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx(B,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:r.label}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:r.url})]})]},a))})})]}),e.jsxs("div",{className:"text-center py-6",children:[e.jsx(y,{className:"mb-4"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Shared on ",c.createdAt.toLocaleDateString(),c.expiresAt&&e.jsxs("span",{children:[" • Expires ",c.expiresAt.toLocaleDateString()]})]})]})]})}function se(){const{token:c}=D(),[s,t]=f.useState(null),[h,m]=f.useState(!0),[r,a]=f.useState(null),[j,p]=f.useState(!1);f.useEffect(()=>{if(!c){a("Invalid share link"),m(!1);return}A()},[c]);const A=async()=>{try{m(!0),a(null);const l=await v.getSharedContent(c);if(!l){a("Content not found or link has expired");return}if(!v.isShareValid(l)){a("This share link has expired");return}t(l)}catch(l){console.error("Error loading shared content:",l),a("Failed to load shared content")}finally{m(!1)}},L=async()=>{if(s)try{p(!0);let l;s.kind==="brand"?l=await w.exportBrandRider(s.content):l=await w.exportCV(s.content);const x=document.createElement("a");x.href=l.url,x.download=l.filename,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(l.url),u.success("PDF exported successfully")}catch(l){console.error("Export error:",l),u.error("Failed to export PDF")}finally{p(!1)}},F=async()=>{if(s)try{p(!0);let l;s.kind==="brand"?l=await k.exportBrandRiderHero(s.content):l=await k.exportCVHero(s.content);const x=document.createElement("a");x.href=l.url,x.download=l.filename,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(l.url),u.success("Image exported successfully")}catch(l){console.error("Export error:",l),u.error("Failed to export image")}finally{p(!1)}},P=async()=>{try{await navigator.clipboard.writeText(window.location.href),u.success("Link copied to clipboard")}catch{u.error("Failed to copy link")}};return h?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(N,{className:"h-8 w-8 animate-spin mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading shared content..."})]})}):r?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:e.jsx(n,{className:"max-w-md w-full",children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(T,{className:"h-12 w-12 text-destructive mx-auto"}),e.jsx("h1",{className:"text-xl font-semibold",children:"Content Not Available"}),e.jsx("p",{className:"text-muted-foreground",children:r}),e.jsx(g,{onClick:()=>window.location.href="/",variant:"outline",children:"Go to Homepage"})]})})})}):s?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b",children:e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5"}),e.jsxs("span",{className:"font-medium",children:["Shared ",s.kind==="brand"?"Brand Rider":"CV"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:P,children:"Copy Link"}),e.jsx(g,{variant:"outline",size:"sm",onClick:F,disabled:j,children:j?e.jsx(N,{className:"h-4 w-4 animate-spin"}):"Export PNG"}),e.jsx(g,{variant:"outline",size:"sm",onClick:L,disabled:j,children:j?e.jsx(N,{className:"h-4 w-4 animate-spin"}):"Export PDF"})]})]})})}),s.kind==="brand"?e.jsx(R,{sharedContent:s}):e.jsx(V,{sharedContent:s})]}):null}export{se as SharedContent};
