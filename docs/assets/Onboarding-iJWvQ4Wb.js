import{j as e}from"./ui-vendor-C0wu6Ixu.js";import{r as u}from"./react-vendor-CaWBk0BP.js";import{C as j,a as $,b as F,c as R}from"./card-Dm6-Ikt0.js";import{B as g}from"./button-D17X8cRn.js";import{B as y}from"./badge-DETtUbOb.js";import{P as z}from"./progress-BbblUuUp.js";import{s as o,a as A}from"./index-WJiHffTg.js";import{u as H}from"./router-vendor-CjcZkGkV.js";import{U as I}from"./user-DfDo6-Si.js";import{U as D}from"./upload-gJ4h4gTs.js";import{F as L}from"./file-text-CGllT9L0.js";import{I as T}from"./id-card-C9pwpYXo.js";import{S as W}from"./sparkles-CulOjrFt.js";import{C as U}from"./circle-check-big-tnYyHLda.js";import{H as J}from"./house-DHGSPX3-.js";import{A as K}from"./arrow-right-DDGpa2Xa.js";import"./supabase-vendor-ChaIFbZk.js";import"./query-vendor-Dx0-x9wB.js";function he(){const[a,x]=u.useState([]),[i,h]=u.useState(!0),[N,_]=u.useState(null),n=H();u.useEffect(()=>{B()},[]);const B=async()=>{var r,t,d;try{const{data:{user:s}}=await o.auth.getUser();if(!s){n("/auth");return}_(s.id);const[m,p,l]=await Promise.all([o.from("brands").select("id").eq("user_id",s.id).limit(1),o.from("cvs").select("id").eq("user_id",s.id).limit(1),o.from("uploads").select("id").eq("user_id",s.id).limit(1)]);if((((r=m.data)==null?void 0:r.length)||0)>0||(((t=p.data)==null?void 0:t.length)||0)>0||(((d=l.data)==null?void 0:d.length)||0)>0){n("/dashboard");return}await q(s.id)}catch(s){console.error("Error checking onboarding status:",s),n("/auth")}finally{h(!1)}},q=async r=>{var t,d,s,m,p;try{const[l,k,Y,S]=await Promise.all([o.from("brands").select("id").eq("user_id",r).limit(1),o.from("cvs").select("id").eq("user_id",r).limit(1),o.from("uploads").select("id").eq("user_id",r).limit(1),o.from("profiles").select("display_name, bio").eq("id",r).single()]),O=((t=S.data)==null?void 0:t.display_name)||((d=S.data)==null?void 0:d.bio),b=(((s=l.data)==null?void 0:s.length)||0)>0,P=(((m=k.data)==null?void 0:m.length)||0)>0,V=(((p=Y.data)==null?void 0:p.length)||0)>0;x([{id:"profile",title:"Complete Your Profile",description:"Add your name, bio, and professional information to get started",icon:e.jsx(I,{className:"w-6 h-6"}),action:"Set up profile",path:"/profile",completed:!!O},{id:"upload",title:"Upload Your First Document",description:"Upload a resume, bio, or any professional document to analyze your writing style",icon:e.jsx(D,{className:"w-6 h-6"}),action:"Upload document",path:"/create",completed:V},{id:"brand",title:"Create Your Brand Rider",description:"Generate your first professional brand document using AI analysis",icon:e.jsx(L,{className:"w-6 h-6"}),action:"Create brand",path:"/create",completed:b},{id:"cv",title:"Generate Your CV",description:"Create a professional CV using your brand style and documents",icon:e.jsx(T,{className:"w-6 h-6"}),action:b?"Generate CV":"Complete previous steps",path:b?"generate-cv":"/create",completed:P}])}catch(l){console.error("Error loading onboarding steps:",l)}},v=async r=>{if(r.id==="cv"&&r.path==="generate-cv")try{const{data:t}=await o.from("brands").select("id").eq("user_id",N).order("created_at",{ascending:!1}).limit(1);t&&t.length>0?n(`/brand/${t[0].id}/generate-cv`):n("/create")}catch(t){console.error("Error fetching brands:",t),n("/create")}else n(r.path)},C=async()=>{if(N)try{A.success("Welcome to Brand Generator! ðŸŽ‰"),n("/dashboard")}catch(r){console.error("Error completing onboarding:",r),A.error("Failed to complete onboarding")}},E=async()=>{await C()};if(i)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});const f=a.filter(r=>r.completed).length,c=a.length,G=c>0?f/c*100:0,w=f===c;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5 py-12",children:e.jsxs("div",{className:"container max-w-4xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-xl",children:e.jsx(W,{className:"w-8 h-8 text-primary"})}),e.jsx("h1",{className:"font-heading text-4xl font-bold",children:"Welcome to Brand Generator!"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Let's get you set up to create professional brand documents and CVs using AI-powered analysis"})]}),e.jsx(j,{className:"mb-8",children:e.jsxs($,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{className:"text-xl",children:"Getting Started"}),e.jsxs(y,{variant:w?"default":"secondary",className:"text-sm",children:[f," of ",c," completed"]})]}),e.jsx(z,{value:G,className:"h-3 mt-4"})]})}),e.jsx("div",{className:"space-y-6 mb-8",children:a.map((r,t)=>e.jsx(M,{step:r,stepNumber:t+1,isNext:!r.completed&&a.slice(0,t).every(d=>d.completed),onAction:()=>v(r)},r.id))}),e.jsx(j,{className:"border-primary/20 bg-gradient-to-r from-primary/5 to-secondary/5",children:e.jsx(R,{className:"p-8 text-center",children:w?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(U,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Congratulations! ðŸŽ‰"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"You've completed the onboarding process. You're ready to create amazing professional content!"}),e.jsxs(g,{onClick:C,size:"lg",className:"gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),"Go to Dashboard"]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Ready to explore?"}),e.jsx("p",{className:"text-muted-foreground",children:"You can complete the remaining steps later from your dashboard"}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(g,{variant:"outline",onClick:E,children:"Skip for now"}),e.jsx(g,{onClick:()=>v(a.find(r=>!r.completed)||a[0]),children:"Continue setup"})]})]})})})]})})}function M({step:a,stepNumber:x,isNext:i,onAction:h}){return e.jsx(j,{className:`transition-all ${a.completed?"bg-green-50 border-green-200 dark:bg-green-950/20 dark:border-green-800/30":i?"bg-primary/5 border-primary/20 shadow-md ring-1 ring-primary/10":"bg-muted/30 border-border"}`,children:e.jsx(R,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold ${a.completed?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":i?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:a.completed?e.jsx(U,{className:"w-6 h-6"}):x}),e.jsx("div",{className:`p-3 rounded-lg ${a.completed?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":i?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:a.icon})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:`text-xl font-semibold ${a.completed?"text-green-700 dark:text-green-400":""}`,children:a.title}),a.completed&&e.jsx(y,{variant:"secondary",className:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:"Complete"}),i&&e.jsx(y,{variant:"default",children:"Next"})]}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a.description}),!a.completed&&e.jsxs(g,{variant:i?"default":"outline",onClick:h,className:"gap-2",disabled:a.action==="Complete previous steps",children:[a.action,e.jsx(K,{className:"w-4 h-4"})]})]})]})})})}export{he as default};
