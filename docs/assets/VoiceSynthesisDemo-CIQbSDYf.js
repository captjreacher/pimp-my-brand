const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/video-generation-service-CtUCtbpE.js","assets/index-WJiHffTg.js","assets/ui-vendor-C0wu6Ixu.js","assets/react-vendor-CaWBk0BP.js","assets/supabase-vendor-ChaIFbZk.js","assets/router-vendor-CjcZkGkV.js","assets/query-vendor-Dx0-x9wB.js","assets/index-DX6TSmGt.css","assets/card-Dm6-Ikt0.js","assets/tabs-BYo5RIDV.js","assets/button-D17X8cRn.js","assets/cdn-cache-service-DI_aPzlR.js","assets/select-DSXyuspn.js","assets/index-CS5Pkq6r.js","assets/check-BfkMwFy4.js","assets/textarea-D8pH1jHG.js","assets/badge-DETtUbOb.js","assets/progress-BbblUuUp.js","assets/circle-alert-3PTuTpgo.js","assets/settings-DJu9X7xD.js","assets/loader-circle-C-FtpdMo.js","assets/download--9-3Bn8B.js","assets/circle-check-big-tnYyHLda.js","assets/switch-D_UTuTHZ.js","assets/users-Vp5rK_a6.js","assets/zap-DuWdr4El.js","assets/crown-7IjoqSw4.js"])))=>i.map(i=>d[i]);
var ve=Object.defineProperty;var we=(c,e,s)=>e in c?ve(c,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[e]=s;var E=(c,e,s)=>we(c,typeof e!="symbol"?e+"":e,s);import{j as t}from"./ui-vendor-C0wu6Ixu.js";import{r as m}from"./react-vendor-CaWBk0BP.js";import{C as I,a as R,b as L,c as P}from"./card-Dm6-Ikt0.js";import{T as _e,a as je,b as ie,c as oe}from"./tabs-BYo5RIDV.js";import{B as T}from"./button-D17X8cRn.js";import{S as W,R as be,c as Q,C as Se}from"./cdn-cache-service-DI_aPzlR.js";import{S as ne,a as ce,b as le,c as de,d as B}from"./select-DSXyuspn.js";import{T as Ne}from"./textarea-D8pH1jHG.js";import{B as ue}from"./badge-DETtUbOb.js";import{P as Ce}from"./progress-BbblUuUp.js";import{c as H,u as te,s as v}from"./index-WJiHffTg.js";import{C as Ee}from"./circle-alert-3PTuTpgo.js";import{S as he}from"./settings-DJu9X7xD.js";import{L as ke}from"./loader-circle-C-FtpdMo.js";import{D as pe}from"./download--9-3Bn8B.js";import{C as ge}from"./circle-check-big-tnYyHLda.js";import{S as Ve}from"./switch-D_UTuTHZ.js";import{_ as K}from"./supabase-vendor-ChaIFbZk.js";import{U as Te}from"./users-Vp5rK_a6.js";import{Z as Ie}from"./zap-DuWdr4El.js";import{C as Pe}from"./crown-7IjoqSw4.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=H("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=H("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=H("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=H("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=H("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),De=({voiceService:c,userId:e,brandRiderId:s,initialText:a="",onVoiceGenerated:r})=>{const{toast:i}=te(),o=m.useRef(null),[n,d]=m.useState(a),[h,u]=m.useState("professional"),[w,b]=m.useState({voice:"alloy",speed:1,pitch:0,emotion:"professional"}),[k,N]=m.useState(!1),[f,y]=m.useState(!1),[x,j]=m.useState(null),[M,A]=m.useState([]),[C,U]=m.useState(null),[g,q]=m.useState(!1),G=c.getVoicePresets();m.useEffect(()=>{J(),$()},[]),m.useEffect(()=>{const l=G.find(V=>V.id===h);l&&b({voice:l.voice,speed:l.speed,pitch:l.pitch,emotion:l.emotion})},[h]);const J=async()=>{try{const l=await c.getUsageStats(e);U(l)}catch(l){console.error("Failed to load usage stats:",l)}},$=async()=>{try{const l=await c.getVoiceHistory(e,5);A(l)}catch(l){console.error("Failed to load generation history:",l)}},Z=async()=>{if(!n.trim()){i({title:"Text Required",description:"Please enter some text to generate voice.",variant:"destructive"});return}N(!0);try{let l;s?l=await c.generateBrandRiderVoiceover(e,s,{...w,customPrompt:n!==a?n:void 0}):l=await c.generateCustomVoiceover(e,n,w),j(l.url),r==null||r(l),await J(),await $(),i({title:"Voice Generated",description:"Your voiceover has been generated successfully!",variant:"default"})}catch(l){i({title:"Generation Failed",description:l.message||"Failed to generate voice. Please try again.",variant:"destructive"})}finally{N(!1)}},p=()=>{!o.current||!x||(f?o.current.pause():o.current.play())},S=async()=>{if(x)try{const V=await(await fetch(x)).blob(),re=window.URL.createObjectURL(V),z=document.createElement("a");z.href=re,z.download=`voiceover_${Date.now()}.mp3`,document.body.appendChild(z),z.click(),document.body.removeChild(z),window.URL.revokeObjectURL(re)}catch{i({title:"Download Failed",description:"Failed to download the audio file.",variant:"destructive"})}},D=C&&C.used<C.limit,O=C?C.used/C.limit*100:0;return t.jsxs("div",{className:"space-y-6",children:[C&&t.jsxs(I,{children:[t.jsx(R,{className:"pb-3",children:t.jsx(L,{className:"text-sm font-medium",children:"Voice Generation Usage"})}),t.jsx(P,{children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsxs("span",{children:["This Month: ",C.used," / ",C.limit]}),t.jsxs("span",{className:"text-muted-foreground",children:["Resets ",C.resetDate.toLocaleDateString()]})]}),t.jsx(Ce,{value:O,className:"h-2"}),!D&&t.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[t.jsx(Ee,{className:"h-4 w-4"}),t.jsx("span",{children:"Monthly limit reached. Upgrade for more generations."})]})]})})]}),t.jsxs(I,{children:[t.jsx(R,{children:t.jsxs(L,{className:"flex items-center gap-2",children:[t.jsx(Y,{className:"h-5 w-5"}),"Voice Generator"]})}),t.jsxs(P,{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-medium",children:"Text to Speech"}),t.jsx(Ne,{value:n,onChange:l=>d(l.target.value),placeholder:"Enter the text you want to convert to speech...",className:"min-h-[100px]",maxLength:500}),t.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[n.length,"/500 characters (≈",Math.ceil(n.length/25)," seconds)"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-medium",children:"Voice Style"}),t.jsxs(ne,{value:h,onValueChange:u,children:[t.jsx(ce,{children:t.jsx(le,{})}),t.jsx(de,{children:G.map(l=>t.jsx(B,{value:l.id,children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium",children:l.name}),t.jsx("span",{className:"text-xs text-muted-foreground",children:l.description})]})},l.id))})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>q(!g),className:"flex items-center gap-2",children:[t.jsx(he,{className:"h-4 w-4"}),"Advanced Settings"]}),g&&t.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/50",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"text-sm font-medium",children:["Speed: ",w.speed,"x"]}),t.jsx(W,{value:[w.speed],onValueChange:([l])=>b(V=>({...V,speed:l})),min:.5,max:2,step:.1,className:"w-full"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"text-sm font-medium",children:["Pitch: ",w.pitch]}),t.jsx(W,{value:[w.pitch],onValueChange:([l])=>b(V=>({...V,pitch:l})),min:-5,max:5,step:1,className:"w-full"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-medium",children:"Emotion"}),t.jsxs(ne,{value:w.emotion,onValueChange:l=>b(V=>({...V,emotion:l})),children:[t.jsx(ce,{children:t.jsx(le,{})}),t.jsxs(de,{children:[t.jsx(B,{value:"neutral",children:"Neutral"}),t.jsx(B,{value:"professional",children:"Professional"}),t.jsx(B,{value:"energetic",children:"Energetic"}),t.jsx(B,{value:"friendly",children:"Friendly"})]})]})]})]})]}),t.jsx(T,{onClick:Z,disabled:k||!D||!n.trim(),className:"w-full",children:k?t.jsxs(t.Fragment,{children:[t.jsx(ke,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating Voice..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Y,{className:"mr-2 h-4 w-4"}),"Generate Voice"]})})]})]}),x&&t.jsxs(I,{children:[t.jsx(R,{children:t.jsxs(L,{className:"flex items-center gap-2",children:[t.jsx(se,{className:"h-5 w-5"}),"Generated Voice"]})}),t.jsxs(P,{children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(T,{variant:"outline",size:"sm",onClick:p,className:"flex items-center gap-2",children:[f?t.jsx(fe,{className:"h-4 w-4"}):t.jsx(ee,{className:"h-4 w-4"}),f?"Pause":"Play"]}),t.jsxs(T,{variant:"outline",size:"sm",onClick:S,className:"flex items-center gap-2",children:[t.jsx(pe,{className:"h-4 w-4"}),"Download"]}),t.jsx(ue,{variant:"secondary",className:"ml-auto",children:"10 seconds"})]}),t.jsx("audio",{ref:o,src:x,onPlay:()=>y(!0),onPause:()=>y(!1),onEnded:()=>y(!1),className:"hidden"})]})]}),M.length>0&&t.jsxs(I,{children:[t.jsx(R,{children:t.jsx(L,{className:"text-sm font-medium",children:"Recent Generations"})}),t.jsx(P,{children:t.jsx("div",{className:"space-y-2",children:M.map(l=>t.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-sm font-medium truncate",children:l.prompt||"Custom voiceover"}),t.jsxs("div",{className:"text-xs text-muted-foreground",children:[new Date(l.created_at).toLocaleDateString()," •",l.cost_cents?` ${l.cost_cents}¢`:""]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[l.status==="completed"&&t.jsx(ge,{className:"h-4 w-4 text-green-500"}),l.result_url&&t.jsx(T,{variant:"ghost",size:"sm",onClick:()=>j(l.result_url),children:t.jsx(ee,{className:"h-3 w-3"})})]})]},l.id))})})]})]})},Oe=({voiceoverUrl:c,brandRiderContent:e,onGenerateVoice:s,onVoiceToggle:a,className:r=""})=>{const i=m.useRef(null),[o,n]=m.useState(!1),[d,h]=m.useState(0),[u,w]=m.useState(0),[b,k]=m.useState(1),[N,f]=m.useState(!1),[y,x]=m.useState(!!c),[j,M]=m.useState(!1);m.useEffect(()=>{const p=i.current;if(!p)return;const S=()=>h(p.currentTime),D=()=>w(p.duration),O=()=>n(!1),l=()=>n(!0),V=()=>n(!1);return p.addEventListener("timeupdate",S),p.addEventListener("loadedmetadata",D),p.addEventListener("ended",O),p.addEventListener("play",l),p.addEventListener("pause",V),()=>{p.removeEventListener("timeupdate",S),p.removeEventListener("loadedmetadata",D),p.removeEventListener("ended",O),p.removeEventListener("play",l),p.removeEventListener("pause",V)}},[c]),m.useEffect(()=>{i.current&&(i.current.volume=N?0:b)},[b,N]);const A=()=>{!i.current||!c||(o?i.current.pause():i.current.play())},C=p=>{if(i.current&&u>0){const S=p[0]/100*u;i.current.currentTime=S,h(S)}},U=p=>{k(p[0]),f(!1)},g=()=>{f(!N)},q=()=>{i.current&&(i.current.currentTime=0,h(0))},G=async()=>{if(c)try{const S=await(await fetch(c)).blob(),D=window.URL.createObjectURL(S),O=document.createElement("a");O.href=D,O.download=`${e.name}_voiceover.mp3`,document.body.appendChild(O),O.click(),document.body.removeChild(O),window.URL.revokeObjectURL(D)}catch(p){console.error("Failed to download voiceover:",p)}},J=p=>{var S;x(p),a==null||a(p),!p&&o&&((S=i.current)==null||S.pause())},$=p=>{const S=Math.floor(p/60),D=Math.floor(p%60);return`${S}:${D.toString().padStart(2,"0")}`},Z=u>0?d/u*100:0;return t.jsxs("div",{className:`space-y-4 ${r}`,children:[t.jsxs(I,{children:[t.jsx(R,{className:"pb-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(L,{className:"text-sm font-medium flex items-center gap-2",children:[t.jsx(Y,{className:"h-4 w-4"}),"Voiceover"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[c&&t.jsx(ue,{variant:"secondary",className:"text-xs",children:"10s"}),t.jsx(Ve,{checked:y,onCheckedChange:J,disabled:!c})]})]})}),y&&t.jsx(P,{className:"pt-0",children:c?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs(T,{variant:"outline",size:"sm",onClick:A,className:"flex items-center gap-2",children:[o?t.jsx(fe,{className:"h-4 w-4"}):t.jsx(ee,{className:"h-4 w-4"}),o?"Pause":"Play"]}),t.jsx(T,{variant:"ghost",size:"sm",onClick:q,children:t.jsx(be,{className:"h-4 w-4"})}),t.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[t.jsx("span",{children:$(d)}),t.jsx("span",{children:"/"}),t.jsx("span",{children:$(u)})]}),t.jsx(T,{variant:"ghost",size:"sm",onClick:()=>M(!j),children:t.jsx(he,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"space-y-2",children:t.jsx(W,{value:[Z],onValueChange:C,max:100,step:1,className:"w-full"})}),j&&t.jsxs("div",{className:"flex items-center gap-4 p-3 bg-muted/50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(T,{variant:"ghost",size:"sm",onClick:g,children:N?t.jsx(Ae,{className:"h-4 w-4"}):t.jsx(se,{className:"h-4 w-4"})}),t.jsx(W,{value:[N?0:b],onValueChange:U,max:1,step:.1,className:"w-20"})]}),t.jsxs(T,{variant:"ghost",size:"sm",onClick:G,className:"flex items-center gap-2",children:[t.jsx(pe,{className:"h-4 w-4"}),"Download"]})]}),t.jsx("audio",{ref:i,src:c,preload:"metadata",className:"hidden"})]}):t.jsxs("div",{className:"text-center py-4",children:[t.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No voiceover generated yet"}),t.jsxs(T,{onClick:s,size:"sm",className:"flex items-center gap-2",children:[t.jsx(Y,{className:"h-4 w-4"}),"Generate Voiceover"]})]})})]}),y&&c&&t.jsxs(I,{className:"bg-muted/30",children:[t.jsx(R,{className:"pb-3",children:t.jsx(L,{className:"text-sm font-medium",children:"Voiceover Script"})}),t.jsx(P,{children:t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("div",{className:"font-medium",children:e.name}),e.tagline&&t.jsx("div",{className:"text-muted-foreground italic",children:e.tagline}),e.description&&t.jsx("div",{children:e.description}),e.keyPoints&&e.keyPoints.length>0&&t.jsx("div",{className:"space-y-1",children:e.keyPoints.slice(0,2).map((p,S)=>t.jsxs("div",{className:"text-muted-foreground",children:["• ",p]},S))})]})})]})]})};var _=(c=>(c.IMAGE_GENERATION="image_generation",c.VOICE_SYNTHESIS="voice_synthesis",c.VIDEO_GENERATION="video_generation",c.ADVANCED_EDITING="advanced_editing",c))(_||{});class Re{}class Le extends Re{constructor(s){super();E(this,"name","openai");E(this,"config");E(this,"baseUrl","https://api.openai.com/v1");this.config=s}async generate(s,a){var r,i;if(s.prompt&&((r=s.options)!=null&&r.format))return this.generateImage(s,a);if(s.text&&((i=s.options)!=null&&i.voice))return this.generateVoice(s,a);if(s.config)return this.generateVideoFallback(s,a);throw new Error("Unsupported request type for OpenAI provider")}async generateImage(s,a){const{prompt:r,options:i}=s,o=this.enhanceImagePrompt(r,i),n={model:this.config.imageModel,prompt:o,n:1,size:this.mapDimensions(i.dimensions),quality:this.config.imageModel==="dall-e-3"?"hd":"standard",style:i.style==="creative"?"vivid":"natural"},d=await this.makeRequest("/images/generations",n,a);if(!d.data||d.data.length===0)throw new Error("No image generated");const h=d.data[0].url,u=this.calculateImageCost(i);return{url:h,metadata:{model:this.config.imageModel,prompt:o,dimensions:i.dimensions,style:i.style},costCents:u}}async generateVoice(s,a){const{text:r,options:i}=s,o=this.limitTextForDuration(r,i.maxDuration),n={model:this.config.ttsModel,input:o,voice:i.voice,speed:i.speed},d=await this.makeRequest("/audio/speech",n,a,"blob"),h=await this.uploadAudioToStorage(d,a.userId),u=this.calculateVoiceCost(o);return{url:h,metadata:{model:this.config.ttsModel,voice:i.voice,speed:i.speed,duration:i.maxDuration,textLength:o.length},costCents:u}}enhanceImagePrompt(s,a){let r=s;switch(a.style){case"professional":r+=", professional, clean, corporate style";break;case"creative":r+=", creative, artistic, vibrant";break;case"minimal":r+=", minimal, simple, clean lines";break;case"bold":r+=", bold, striking, high contrast";break}switch(a.format){case"logo":r+=", logo design, vector style, transparent background";break;case"avatar":r+=", portrait, professional headshot";break;case"background":r+=", background pattern, seamless";break;case"icon":r+=", icon design, simple, recognizable";break}return a.colorPalette&&a.colorPalette.length>0&&(r+=`, color palette: ${a.colorPalette.join(", ")}`),r}mapDimensions(s){const{width:a,height:r}=s;return a===r?"1024x1024":a>r?"1792x1024":"1024x1792"}limitTextForDuration(s,a){const i=Math.floor(a*2.5),o=s.split(" ");return o.length<=i?s:o.slice(0,i).join(" ")+"..."}async uploadAudioToStorage(s,a){const r=`voice_${Date.now()}.mp3`,i=a?`${a}/generated-audio/${r}`:`public/generated-audio/${r}`,{error:o}=await v.storage.from("generated-assets").upload(i,s,{contentType:"audio/mpeg",cacheControl:"3600"});if(o)throw console.error("Failed to upload audio to storage:",o),new Error("Failed to store generated audio");const{data:n}=v.storage.from("generated-assets").getPublicUrl(i);return n!=null&&n.publicUrl?n.publicUrl:`https://your-new-project.supabase.co/storage/v1/object/public/generated-assets/${i}`}calculateImageCost(s){return this.config.imageModel==="dall-e-3"?8:2}calculateVoiceCost(s){const a=s.length;return Math.ceil(a/1e3*1.5)}async generateVideoFallback(s,a){const{config:r}=s,o={prompt:`Professional ${r.avatarStyle.category} person, ${r.avatarStyle.description}, high quality portrait`,options:{style:"professional",dimensions:{width:1024,height:1024},format:"avatar"}},n=await this.generateImage(o,a),d={text:r.script,options:{voice:"alloy",speed:1,pitch:1,emotion:"professional",maxDuration:r.duration}},h=await this.generateVoice(d,a),u=await this.createSimpleVideo(n.url,h.url,r,a.userId),w=(n.costCents||0)+(h.costCents||0)+100;return{url:u,metadata:{provider:"OpenAI Fallback",avatarImage:n.url,voiceAudio:h.url,config:r,note:"Generated using OpenAI image + voice with simple animations"},costCents:w}}async createSimpleVideo(s,a,r,i){const n=`${`video_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}.mp4`,d=i?`${i}/videos/${n}`:`videos/${n}`;return console.log("Creating video with:",{avatar:s,audio:a,config:r}),`https://placeholder-storage.com/generated-videos/${d}`}estimateCost(s){var a;return s.prompt&&((a=s.options)!=null&&a.format)?this.calculateImageCost(s.options):s.text?this.calculateVoiceCost(s.text):s.config?8+this.calculateVoiceCost(s.config.script)+100:0}async isAvailable(){try{return(await fetch(`${this.baseUrl}/models`,{headers:{Authorization:`Bearer ${this.config.apiKey}`,"Content-Type":"application/json"}})).ok}catch{return!1}}async makeRequest(s,a,r,i="json"){var h;const o=new AbortController,n=r.timeout||3e4,d=setTimeout(()=>o.abort(),n);try{const u=await fetch(`${this.baseUrl}${s}`,{method:"POST",headers:{Authorization:`Bearer ${this.config.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify(a),signal:o.signal});if(!u.ok){const w=await u.json().catch(()=>({error:"Unknown error"}));throw new Error(`OpenAI API error: ${((h=w.error)==null?void 0:h.message)||u.statusText}`)}return i==="blob"?await u.blob():await u.json()}finally{clearTimeout(d)}}}class ye{constructor(){E(this,"openaiApiKey");this.openaiApiKey=""}async moderateContent(e){try{return e.contentType==="text"?await this.moderateText(e.content):e.contentType==="image"?await this.moderateImage(e.content):e.contentType==="audio"||e.contentType==="video"?await this.moderateAudioVideo(e.content):{flagged:!1,categories:[],confidence:0}}catch(s){return console.error("Content moderation failed:",s),{flagged:!0,categories:["error"],confidence:1,reason:"Moderation service error - requires manual review"}}}async moderateText(e){const r=(await(await fetch("https://api.openai.com/v1/moderations",{method:"POST",headers:{Authorization:`Bearer ${this.openaiApiKey}`,"Content-Type":"application/json"},body:JSON.stringify({input:e})})).json()).results[0];return{flagged:r.flagged,categories:Object.keys(r.categories).filter(i=>r.categories[i]),confidence:Math.max(...Object.values(r.category_scores))}}async moderateImage(e){const a=await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${this.openaiApiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-4-vision-preview",messages:[{role:"user",content:[{type:"text",text:"Analyze this image for inappropriate content. Return a JSON object with: flagged (boolean), categories (array of strings), confidence (0-1). Categories can include: violence, adult, hate, harassment, self-harm, illegal."},{type:"image_url",image_url:{url:e}}]}],max_tokens:300})})).json();try{return JSON.parse(a.choices[0].message.content)}catch{return{flagged:!0,categories:["parsing_error"],confidence:1}}}async moderateAudioVideo(e){return{flagged:!1,categories:[],confidence:0}}async logModerationResult(e,s,a){await v.from("ai_moderation_logs").insert({request_id:e,user_id:a,flagged:s.flagged,categories:s.categories,confidence:s.confidence,reason:s.reason,created_at:new Date().toISOString()})}async getFlaggedContent(e=50){const{data:s,error:a}=await v.from("ai_moderation_logs").select(`
        *,
        ai_generation_requests(*)
      `).eq("flagged",!0).order("created_at",{ascending:!1}).limit(e);if(a)throw a;return s||[]}}const Me=Object.freeze(Object.defineProperty({__proto__:null,AIContentModerationService:ye},Symbol.toStringTag,{value:"Module"}));class qe{constructor(){E(this,"isProcessing",!1);E(this,"processingInterval",null);E(this,"maxConcurrentJobs",3);E(this,"currentJobs",new Set);this.startProcessing()}async queueJob(e){const{data:s,error:a}=await v.from("ai_background_jobs").insert({type:e.type,payload:e.payload,priority:e.priority,user_id:e.userId,status:"pending"}).select().single();if(a)throw a;return s.id}async getJobStatus(e){const{data:s,error:a}=await v.from("ai_background_jobs").select("*").eq("id",e).single();return a?null:this.mapDbJobToJob(s)}async getUserJobs(e,s=50){const{data:a,error:r}=await v.from("ai_background_jobs").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(s);if(r)throw r;return a.map(this.mapDbJobToJob)}startProcessing(){this.processingInterval||(this.processingInterval=setInterval(async()=>{if(!(this.currentJobs.size>=this.maxConcurrentJobs))try{await this.processNextJob()}catch(e){console.error("Background job processing error:",e)}},5e3))}async processNextJob(){const{data:e,error:s}=await v.from("ai_background_jobs").select("*").eq("status","pending").order("priority",{ascending:!1}).order("created_at",{ascending:!0}).limit(1);if(s||!e||e.length===0)return;const a=this.mapDbJobToJob(e[0]);if(!this.currentJobs.has(a.id)){this.currentJobs.add(a.id);try{await this.updateJobStatus(a.id,"processing");const r=await this.executeJob(a);await this.updateJobStatus(a.id,"completed",void 0,r)}catch(r){console.error(`Job ${a.id} failed:`,r),await this.updateJobStatus(a.id,"failed",r.message)}finally{this.currentJobs.delete(a.id)}}}async executeJob(e){switch(e.type){case"image_generation":return await this.processImageGeneration(e);case"voice_synthesis":return await this.processVoiceSynthesis(e);case"video_generation":return await this.processVideoGeneration(e);case"content_moderation":return await this.processContentModeration(e);default:throw new Error(`Unknown job type: ${e.type}`)}}async processImageGeneration(e){const{AIServiceOrchestrator:s}=await K(async()=>{const{AIServiceOrchestrator:i}=await Promise.resolve().then(()=>Ge);return{AIServiceOrchestrator:i}},void 0),r=await new s().generateImage(e.payload.prompt,e.payload.options);return e.payload.requestId&&await v.from("ai_generation_requests").update({status:"completed",result_url:r.url,processing_time_ms:Date.now()-new Date(e.createdAt).getTime()}).eq("id",e.payload.requestId),r}async processVoiceSynthesis(e){const{VoiceSynthesisService:s}=await K(async()=>{const{VoiceSynthesisService:i}=await Promise.resolve().then(()=>Ue);return{VoiceSynthesisService:i}},void 0),r=await new s().generateVoice(e.payload.text,e.payload.options);return e.payload.requestId&&await v.from("ai_generation_requests").update({status:"completed",result_url:r.audioUrl,processing_time_ms:Date.now()-new Date(e.createdAt).getTime()}).eq("id",e.payload.requestId),r}async processVideoGeneration(e){const{VideoGenerationService:s}=await K(async()=>{const{VideoGenerationService:i}=await import("./video-generation-service-CtUCtbpE.js");return{VideoGenerationService:i}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26])),r=await new s().generateVideo(e.payload.config);return e.payload.requestId&&await v.from("ai_generation_requests").update({status:"completed",result_url:r.videoUrl,processing_time_ms:Date.now()-new Date(e.createdAt).getTime()}).eq("id",e.payload.requestId),r}async processContentModeration(e){const{AIContentModerationService:s}=await K(async()=>{const{AIContentModerationService:i}=await Promise.resolve().then(()=>Me);return{AIContentModerationService:i}},void 0),a=new s,r=await a.moderateContent(e.payload.request);return await a.logModerationResult(e.payload.request.id,r,e.payload.request.userId),r}async updateJobStatus(e,s,a,r){const i={status:s};s==="processing"?i.processed_at=new Date().toISOString():(s==="completed"||s==="failed")&&(i.completed_at=new Date().toISOString()),a&&(i.error=a),r&&(i.result=r),await v.from("ai_background_jobs").update(i).eq("id",e)}mapDbJobToJob(e){return{id:e.id,type:e.type,payload:e.payload,status:e.status,priority:e.priority,userId:e.user_id,createdAt:e.created_at,processedAt:e.processed_at,completedAt:e.completed_at,error:e.error,result:e.result}}stopProcessing(){this.processingInterval&&(clearInterval(this.processingInterval),this.processingInterval=null)}}const Fe=new qe;class ae{constructor(e){E(this,"providers",new Map);E(this,"config");E(this,"moderationService");this.config=e,this.moderationService=new ye,this.initializeProviders()}initializeProviders(){const e=new Le(this.config.providers.openai);this.providers.set(_.IMAGE_GENERATION,[e]),this.providers.set(_.VOICE_SYNTHESIS,[e]),this.providers.set(_.VIDEO_GENERATION,[e]),this.providers.set(_.ADVANCED_EDITING,[e])}async generateWithFallback(e,s,a,r){const i=this.providers.get(e)||[];if(i.length===0)throw new Error(`No providers configured for feature: ${e}`);if(s.prompt||s.text){const h=s.prompt||s.text,u=await this.moderationService.moderateContent({id:crypto.randomUUID(),content:h,contentType:"text",userId:r});if(u.flagged)throw new Error("Content flagged for review: "+u.reason)}const o=this.generateCacheKey(e,s),n=await Q.getCachedAsset(o);if(n)return{url:n,metadata:{provider:"cache",cached:!0}};if(this.isResourceIntensive(e,s))return{url:"",metadata:{backgroundJobId:await Fe.queueJob({type:e,payload:{request:s,options:a},priority:a.priority||0,userId:r}),queued:!0}};let d=null;for(let h=0;h<i.length;h++){const u=i[h];try{await this.enforceRateLimit(r,e),await this.checkBudget(r,e,u.estimateCost(s));const w=await this.trackRequestStart(r,e,u.name,s),b=Date.now(),k=await u.generate(s,a),N=Date.now()-b;if(k.url&&this.isCacheable(e))try{await Q.cacheAsset(o,new Blob([k.url],{type:"text/plain"}),"text/plain",{provider:u.name,feature:e})}catch(f){console.warn("Failed to cache result:",f)}return await this.trackRequestComplete(w,k,N),await this.trackSuccess(u,e),await this.recordPerformanceMetrics(e,u.name,N,!0,k.costCents),k}catch(w){if(d=w,await this.trackFailure(u,e,d),await this.recordPerformanceMetrics(e,u.name,0,!1),h===i.length-1||!this.isRetryableError(d))break;console.warn(`Provider ${u.name} failed for ${e}, trying next provider:`,d.message)}}throw d||new Error("All AI providers failed")}async trackRequestStart(e,s,a,r){const{data:i,error:o}=await v.from("ai_generation_requests").insert({user_id:e,feature:s,provider:a,prompt:r.prompt||JSON.stringify(r),options:r.options||{},status:"processing"}).select("id").single();return o?(console.error("Failed to track request start:",o),crypto.randomUUID()):i.id}async trackRequestComplete(e,s,a){const{error:r}=await v.from("ai_generation_requests").update({result_url:s.url,cost_cents:s.costCents||0,processing_time_ms:a,status:"completed"}).eq("id",e);r&&console.error("Failed to track request completion:",r)}async trackSuccess(e,s){console.log(`Provider ${e.name} succeeded for ${s}`)}async trackFailure(e,s,a){console.error(`Provider ${e.name} failed for ${s}:`,a.message)}isRetryableError(e){return["rate_limit_exceeded","service_unavailable","timeout","network_error"].some(a=>e.message.toLowerCase().includes(a))}async enforceRateLimit(e,s){const a=new Date(Date.now()-6e4),{data:r,error:i}=await v.from("ai_generation_requests").select("id").eq("user_id",e).eq("feature",s).gte("created_at",a.toISOString());if(i){console.error("Failed to check rate limits:",i);return}const o=await this.getRateLimits(e,s);if(r.length>=o.perMinute)throw new Error("Rate limit exceeded. Please try again later.")}async checkBudget(e,s,a){const r=new Date;r.setDate(1),r.setHours(0,0,0,0);const{data:i,error:o}=await v.from("ai_usage_tracking").select("total_cost_cents").eq("user_id",e).eq("feature",s).gte("period_start",r.toISOString().split("T")[0]).single();if(o&&o.code!=="PGRST116"){console.error("Failed to check budget:",o);return}const n=(i==null?void 0:i.total_cost_cents)||0,d=await this.getSubscriptionLimits(e);if(n+a>d.monthlyCostLimit)throw new Error("Monthly budget limit exceeded. Please upgrade your subscription.")}async getRateLimits(e,s){return{perMinute:10}}async getSubscriptionLimits(e){return{monthlyCostLimit:1e3}}generateCacheKey(e,s){return Q.generateCacheKey(e,s)}isResourceIntensive(e,s){var a,r,i;switch(e){case _.IMAGE_GENERATION:return((a=s.dimensions)==null?void 0:a.width)*((r=s.dimensions)==null?void 0:r.height)>1024*1024;case _.VOICE_SYNTHESIS:return(((i=s.text)==null?void 0:i.length)||0)>500;case _.VIDEO_GENERATION:return!0;default:return!1}}isCacheable(e){return[_.IMAGE_GENERATION,_.VOICE_SYNTHESIS,_.VIDEO_GENERATION].includes(e)}async recordPerformanceMetrics(e,s,a,r,i){const o={feature:e,provider:s},n=[{metric_type:"request",metric_name:"response_time",value:a,unit:"ms",tags:o},{metric_type:"request",metric_name:"success",value:r?1:0,unit:"boolean",tags:o}];i!==void 0&&n.push({metric_type:"request",metric_name:"cost",value:i,unit:"cents",tags:o});try{await v.from("ai_performance_metrics").insert(n)}catch(d){console.error("Failed to record performance metrics:",d)}}}const Ge=Object.freeze(Object.defineProperty({__proto__:null,AIServiceOrchestrator:ae},Symbol.toStringTag,{value:"Module"}));class F{static async canAccessFeature(e,s){try{const a=await this.getUserSubscriptionTier(e);return this.featureLimits[a][s].monthly===0?!1:(await this.checkQuota(e,s)).canUse}catch(a){return console.error("Error checking feature access:",a),!1}}static async getUsageLimit(e,s){const a=await this.getUserSubscriptionTier(e);return this.featureLimits[a][s]}static async trackUsage(e,s,a){const r=new Date,i=new Date(r.getFullYear(),r.getMonth(),1),o=new Date(r.getFullYear(),r.getMonth()+1,0),{error:n}=await v.from("ai_usage_tracking").upsert({user_id:e,feature:s,usage_count:1,total_cost_cents:a,period_start:i.toISOString().split("T")[0],period_end:o.toISOString().split("T")[0],subscription_tier:await this.getUserSubscriptionTier(e)},{onConflict:"user_id,feature,period_start",ignoreDuplicates:!1});if(n)throw console.error("Error tracking usage:",n),n}static async checkQuota(e,s){const a=await this.getUserSubscriptionTier(e),r=this.featureLimits[a][s],i=new Date,o=new Date(i.getFullYear(),i.getMonth(),1),n=new Date(i.getFullYear(),i.getMonth(),i.getDate()),{data:d}=await v.from("ai_usage_tracking").select("usage_count, total_cost_cents").eq("user_id",e).eq("feature",s).gte("period_start",o.toISOString().split("T")[0]).single(),h=(d==null?void 0:d.usage_count)||0,u=(d==null?void 0:d.total_cost_cents)||0;if(h>=r.monthly)return{canUse:!1,remaining:0,resetDate:new Date(i.getFullYear(),i.getMonth()+1,1),reason:"Monthly limit exceeded"};if(u>=r.costLimit)return{canUse:!1,remaining:0,resetDate:new Date(i.getFullYear(),i.getMonth()+1,1),reason:"Monthly cost limit exceeded"};const{data:w}=await v.from("ai_generation_requests").select("id").eq("user_id",e).eq("feature",s).gte("created_at",n.toISOString()),b=(w==null?void 0:w.length)||0;return b>=r.daily?{canUse:!1,remaining:0,resetDate:new Date(n.getTime()+24*60*60*1e3),reason:"Daily limit exceeded"}:{canUse:!0,remaining:Math.min(r.monthly-h,r.daily-b),resetDate:new Date(i.getFullYear(),i.getMonth()+1,1)}}static async getUserSubscriptionTier(e){const{data:s}=await v.from("profiles").select("subscription_tier").eq("id",e).single();return(s==null?void 0:s.subscription_tier)||"free"}}E(F,"featureLimits",{free:{image_generation:{monthly:5,daily:2,perRequest:1,costLimit:100},voice_synthesis:{monthly:0,daily:0,perRequest:0,costLimit:0},video_generation:{monthly:0,daily:0,perRequest:0,costLimit:0},advanced_editing:{monthly:10,daily:5,perRequest:1,costLimit:150}},tier_1:{image_generation:{monthly:50,daily:10,perRequest:3,costLimit:1e3},voice_synthesis:{monthly:20,daily:5,perRequest:1,costLimit:500},video_generation:{monthly:0,daily:0,perRequest:0,costLimit:0},advanced_editing:{monthly:100,daily:20,perRequest:5,costLimit:700}},tier_2:{image_generation:{monthly:200,daily:30,perRequest:10,costLimit:5e3},voice_synthesis:{monthly:100,daily:15,perRequest:5,costLimit:2e3},video_generation:{monthly:20,daily:3,perRequest:1,costLimit:3e3},advanced_editing:{monthly:500,daily:50,perRequest:20,costLimit:1800}}});class xe{constructor(e){E(this,"orchestrator");this.orchestrator=new ae(e)}async generateBrandRiderVoiceover(e,s,a={}){if(!await F.canAccessFeature(e,_.VOICE_SYNTHESIS))throw new Error("Voice synthesis requires a Tier 1 or higher subscription");const i=await this.getBrandRiderText(s),n={text:this.optimizeTextForVoice(i,a.customPrompt),options:{voice:a.voice||"professional",speed:a.speed||1,pitch:a.pitch||0,emotion:a.emotion||"professional",maxDuration:10}},d=await this.orchestrator.generateWithFallback(_.VOICE_SYNTHESIS,n,{userId:e,timeout:45e3},e);return await F.trackUsage(e,_.VOICE_SYNTHESIS,d.costCents||0),await this.storeVoiceoverReference(e,s,d),d}async generateCustomVoiceover(e,s,a={}){if(!await F.canAccessFeature(e,_.VOICE_SYNTHESIS))throw new Error("Voice synthesis requires a Tier 1 or higher subscription");const i={text:this.optimizeTextForVoice(s),options:{voice:a.voice||"professional",speed:a.speed||1,pitch:a.pitch||0,emotion:a.emotion||"neutral",maxDuration:10}},o=await this.orchestrator.generateWithFallback(_.VOICE_SYNTHESIS,i,{userId:e,timeout:45e3},e);return await F.trackUsage(e,_.VOICE_SYNTHESIS,o.costCents||0),o}getVoicePresets(){return[{id:"professional",name:"Professional",voice:"alloy",speed:1,pitch:0,emotion:"professional",description:"Clear, authoritative voice perfect for business presentations"},{id:"energetic",name:"Energetic",voice:"nova",speed:1.1,pitch:2,emotion:"energetic",description:"Upbeat and dynamic voice that captures attention"},{id:"friendly",name:"Friendly",voice:"shimmer",speed:.95,pitch:1,emotion:"friendly",description:"Warm and approachable voice for personal branding"},{id:"confident",name:"Confident",voice:"onyx",speed:.9,pitch:-1,emotion:"professional",description:"Strong, confident voice that commands respect"},{id:"conversational",name:"Conversational",voice:"echo",speed:1,pitch:0,emotion:"friendly",description:"Natural, conversational tone for storytelling"}]}async getVoiceHistory(e,s=10){const{data:a,error:r}=await v.from("ai_generation_requests").select(`
        id,
        prompt,
        result_url,
        cost_cents,
        created_at,
        options,
        status
      `).eq("user_id",e).eq("feature",_.VOICE_SYNTHESIS).order("created_at",{ascending:!1}).limit(s);return r?(console.error("Failed to fetch voice history:",r),[]):a||[]}async getUsageStats(e){const s=await F.checkQuota(e,_.VOICE_SYNTHESIS),a=await F.getUsageLimit(e,_.VOICE_SYNTHESIS),r=new Date,i=new Date(r.getFullYear(),r.getMonth(),1),{data:o}=await v.from("ai_usage_tracking").select("usage_count, total_cost_cents").eq("user_id",e).eq("feature",_.VOICE_SYNTHESIS).gte("period_start",i.toISOString().split("T")[0]).single();return{used:(o==null?void 0:o.usage_count)||0,limit:a.monthly,costUsed:(o==null?void 0:o.total_cost_cents)||0,costLimit:a.costLimit,resetDate:s.resetDate}}async getBrandRiderText(e){const{data:s,error:a}=await v.from("brands").select("title, tagline, bio, strengths").eq("id",e).single();if(a||!s)throw new Error("Brand rider not found");let r=`${s.title||"Personal Brand"}. `;if(s.tagline&&(r+=`${s.tagline}. `),s.bio&&(r+=`${s.bio}. `),s.strengths&&Array.isArray(s.strengths)){const i=s.strengths.slice(0,2);r+=i.join(". ")+"."}return r}optimizeTextForVoice(e,s){if(s)return s;let a=e.replace(/\n+/g,". ").replace(/\s+/g," ").replace(/[^\w\s.,!?-]/g,"").trim();return a.match(/[.!?]$/)||(a+="."),a=a.replace(/\. /g,". ").replace(/([.!?])\s*([A-Z])/g,"$1 $2"),a}async storeVoiceoverReference(e,s,a){const{error:r}=await v.from("generated_assets").insert({user_id:e,asset_type:"audio",storage_path:a.url,metadata:{brand_rider_id:s,generation_metadata:a.metadata,cost_cents:a.costCents},is_public:!1,moderation_status:"approved"});r&&console.error("Failed to store voiceover reference:",r)}}const Ue=Object.freeze(Object.defineProperty({__proto__:null,VoiceSynthesisService:xe},Symbol.toStringTag,{value:"Module"})),$e=({userId:c,voiceService:e})=>{const{toast:s}=te(),[a,r]=m.useState({isGenerating:!1,currentAudio:null,isPlaying:!1,generationHistory:[],usageStats:null,error:null});m.useEffect(()=>{i(),o()},[c]);const i=m.useCallback(async()=>{try{const f=await e.getUsageStats(c);r(y=>({...y,usageStats:f,error:null}))}catch(f){console.error("Failed to load usage stats:",f),r(y=>({...y,error:f.message}))}},[c,e]),o=m.useCallback(async()=>{try{const f=await e.getVoiceHistory(c);r(y=>({...y,generationHistory:f,error:null}))}catch(f){console.error("Failed to load generation history:",f),r(y=>({...y,error:f.message}))}},[c,e]),n=m.useCallback(async(f,y)=>{r(x=>({...x,isGenerating:!0,error:null}));try{const x=await e.generateBrandRiderVoiceover(c,f,y);return r(j=>({...j,currentAudio:x.url,isGenerating:!1})),await Promise.all([i(),o()]),s({title:"Voice Generated",description:"Your brand rider voiceover has been generated successfully!"}),x}catch(x){return r(j=>({...j,isGenerating:!1,error:x.message})),s({title:"Generation Failed",description:x.message||"Failed to generate voice. Please try again.",variant:"destructive"}),null}},[c,e,i,o,s]),d=m.useCallback(async(f,y)=>{r(x=>({...x,isGenerating:!0,error:null}));try{const x=await e.generateCustomVoiceover(c,f,y);return r(j=>({...j,currentAudio:x.url,isGenerating:!1})),await Promise.all([i(),o()]),s({title:"Voice Generated",description:"Your custom voiceover has been generated successfully!"}),x}catch(x){return r(j=>({...j,isGenerating:!1,error:x.message})),s({title:"Generation Failed",description:x.message||"Failed to generate voice. Please try again.",variant:"destructive"}),null}},[c,e,i,o,s]),h=m.useCallback(f=>{r(y=>({...y,currentAudio:f}))},[]),u=m.useCallback(f=>{r(y=>({...y,isPlaying:f}))},[]),w=m.useCallback(async(f,y)=>{try{const j=await(await fetch(f)).blob(),M=window.URL.createObjectURL(j),A=document.createElement("a");A.href=M,A.download=y||`voiceover_${Date.now()}.mp3`,document.body.appendChild(A),A.click(),document.body.removeChild(A),window.URL.revokeObjectURL(M),s({title:"Download Complete",description:"Audio file has been downloaded successfully."})}catch{s({title:"Download Failed",description:"Failed to download the audio file.",variant:"destructive"})}},[s]),b=m.useCallback(()=>e.getVoicePresets(),[e]),k=a.usageStats?a.usageStats.used<a.usageStats.limit:!1,N=a.usageStats?a.usageStats.used/a.usageStats.limit*100:0;return{...a,canGenerate:k,usagePercentage:N,generateBrandRiderVoice:n,generateCustomVoice:d,setCurrentAudio:h,setIsPlaying:u,downloadAudio:w,loadUsageStats:i,loadGenerationHistory:o,getVoicePresets:b,refresh:m.useCallback(()=>{i(),o()},[i,o])}};var X={};const me={providers:{openai:{apiKey:X.VITE_OPENAI_API_KEY||"mock-key",imageModel:"dall-e-3",ttsModel:"tts-1",voiceOptions:["alloy","echo","fable","onyx","nova","shimmer"]},stability:{apiKey:X.VITE_STABILITY_API_KEY||"mock-key",endpoint:"https://api.stability.ai"},elevenlabs:{apiKey:X.VITE_ELEVENLABS_API_KEY||"mock-key",voiceId:"default-voice-id"}},limits:{maxFileSize:10*1024*1024,maxGenerationTime:6e4,costLimits:{free:100,tier_1:1e3,tier_2:5e3}}},ze=()=>{const{toast:c}=te(),[e]=m.useState("demo-user-123"),[s,a]=m.useState(null),[r,i]=m.useState(null),[o,n]=m.useState(null),d=[{id:"brand-1",name:"TechInnovate Solutions",tagline:"Transforming Ideas into Digital Reality",description:"We specialize in cutting-edge software development and digital transformation services.",key_points:["Expert team with 10+ years experience","Agile development methodology","End-to-end project management"]},{id:"brand-2",name:"EcoGreen Consulting",tagline:"Sustainable Solutions for a Better Tomorrow",description:"Environmental consulting firm focused on helping businesses reduce their carbon footprint.",key_points:["Certified sustainability experts","Proven track record of 40% emission reductions","Comprehensive environmental audits"]}];m.useEffect(()=>{new ae(me);const g=new xe(me);a(g),i(d[0])},[]);const{isGenerating:h,currentAudio:u,isPlaying:w,generationHistory:b,usageStats:k,canGenerate:N,usagePercentage:f,generateBrandRiderVoice:y,generateCustomVoice:x,setCurrentAudio:j,downloadAudio:M,getVoicePresets:A}=$e({userId:e,voiceService:s}),C=async()=>{if(!(!r||!s))try{const g=await y(r.id);g&&(n(g.url),c({title:"Voice Generated!",description:"Your brand rider voiceover is ready to play."}))}catch(g){console.error("Failed to generate voice:",g)}},U=[{tier:"Free",icon:t.jsx(Te,{className:"h-5 w-5"}),features:[{text:"Basic image editing",available:!0},{text:"Template selection",available:!0},{text:"Voice synthesis",available:!1},{text:"Video avatars",available:!1}],price:"$0/month"},{tier:"Tier 1",icon:t.jsx(Ie,{className:"h-5 w-5"}),features:[{text:"AI image generation",available:!0},{text:"Voice synthesis (20/month)",available:!0},{text:"Advanced editing tools",available:!0},{text:"Video avatars",available:!1}],price:"$19/month",highlight:!0},{tier:"Tier 2",icon:t.jsx(Pe,{className:"h-5 w-5"}),features:[{text:"Unlimited AI generation",available:!0},{text:"Voice synthesis (100/month)",available:!0},{text:"Video avatar creation",available:!0},{text:"Priority support",available:!0}],price:"$49/month"}];return s?t.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[t.jsxs("div",{className:"text-center space-y-4",children:[t.jsxs("h1",{className:"text-4xl font-bold flex items-center justify-center gap-3",children:[t.jsx(Y,{className:"h-8 w-8 text-primary"}),"AI Voice Synthesis"]}),t.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Transform your brand content into professional voiceovers with AI-powered speech synthesis. Available for Tier 1+ subscribers."})]}),t.jsxs(I,{children:[t.jsx(R,{children:t.jsx(L,{children:"Subscription Tiers & Features"})}),t.jsx(P,{children:t.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:U.map(g=>t.jsxs(I,{className:g.highlight?"border-primary shadow-lg":"",children:[t.jsxs(R,{className:"text-center",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[g.icon,t.jsx(L,{className:"text-lg",children:g.tier})]}),t.jsx("div",{className:"text-2xl font-bold",children:g.price})]}),t.jsx(P,{children:t.jsx("ul",{className:"space-y-2",children:g.features.map((q,G)=>t.jsxs("li",{className:"flex items-center gap-2",children:[q.available?t.jsx(ge,{className:"h-4 w-4 text-green-500"}):t.jsx(Se,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:q.available?"":"text-muted-foreground",children:q.text})]},G))})})]},g.tier))})})]}),t.jsxs(_e,{defaultValue:"generator",className:"space-y-6",children:[t.jsxs(je,{className:"grid w-full grid-cols-2",children:[t.jsx(ie,{value:"generator",children:"Voice Generator"}),t.jsx(ie,{value:"integration",children:"Brand Integration"})]}),t.jsx(oe,{value:"generator",className:"space-y-6",children:t.jsx(De,{voiceService:s,userId:e,onVoiceGenerated:g=>{n(g.url),j(g.url)}})}),t.jsxs(oe,{value:"integration",className:"space-y-6",children:[t.jsxs(I,{children:[t.jsx(R,{children:t.jsx(L,{children:"Select Brand for Voiceover"})}),t.jsx(P,{children:t.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:d.map(g=>t.jsx(I,{className:`cursor-pointer transition-colors ${(r==null?void 0:r.id)===g.id?"border-primary bg-primary/5":""}`,onClick:()=>i(g),children:t.jsxs(P,{className:"p-4",children:[t.jsx("h3",{className:"font-semibold",children:g.name}),t.jsx("p",{className:"text-sm text-muted-foreground italic",children:g.tagline}),t.jsx("p",{className:"text-sm mt-2",children:g.description})]})},g.id))})})]}),r&&t.jsx(Oe,{voiceoverUrl:o,brandRiderContent:r,onGenerateVoice:C,onVoiceToggle:g=>{console.log("Voice toggle:",g)}})]})]}),t.jsx(I,{className:"bg-muted/50",children:t.jsxs(P,{className:"p-6 text-center",children:[t.jsx(se,{className:"h-8 w-8 mx-auto mb-4 text-muted-foreground"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Demo Mode"}),t.jsx("p",{className:"text-muted-foreground",children:"This is a demonstration of the voice synthesis system. In production, this feature requires a Tier 1+ subscription and valid API keys for OpenAI and ElevenLabs services."})]})})]}):t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx("div",{className:"text-center",children:"Loading voice synthesis service..."})})},ht=Object.freeze(Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"}));export{_ as A,F,ht as V};
