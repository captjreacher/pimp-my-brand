import{j as e}from"./ui-vendor-D6k6xAJg.js";import{r as n}from"./react-vendor-CbTYwD9p.js";import{B as c}from"./button-ro640sRo.js";import{I as S}from"./input-DlTyRBPh.js";import{a as s,s as d}from"./index-CWAcGGyY.js";import{S as N}from"./sparkles-3Bp2-477.js";import{L as b}from"./loader-circle-Etq7a_Nb.js";import{U as F}from"./upload-BHSn4587.js";import{I}from"./image-s7uvQ5WQ.js";import"./supabase-vendor-CYMOQS5a.js";import"./query-vendor-CKaEIWod.js";import"./router-vendor-BssJdvT9.js";function q({brandData:g,onComplete:w,onSkip:y}){const[m,u]=n.useState(!1),[p,h]=n.useState(!1),[t,x]=n.useState(null),[l,v]=n.useState(""),U=async()=>{if(!l.trim()){s.error("Please enter a description for your logo");return}u(!0);try{const{data:r,error:a}=await d.functions.invoke("generate-logo",{body:{prompt:l.trim(),brandName:g.tagline||"Brand",colorPalette:g.color_palette}});if(a)throw a;const i=r.imageUrl;x(i),s.success("Logo generated!")}catch(r){console.error("Logo generation error:",r),s.error(r.message||"Failed to generate logo")}finally{u(!1)}},k=async r=>{var i;const a=(i=r.target.files)==null?void 0:i[0];if(a){if(!a.type.startsWith("image/")){s.error("Please upload an image file");return}h(!0);try{const{data:{user:o}}=await d.auth.getUser();if(!o)throw new Error("Not authenticated");const L=a.name.split(".").pop(),f=`${o.id}/${Date.now()}.${L}`,{error:j}=await d.storage.from("logos").upload(f,a);if(j)throw j;const{data:{publicUrl:C}}=d.storage.from("logos").getPublicUrl(f);x(C),s.success("Logo uploaded!")}catch(o){console.error("Upload error:",o),s.error(o.message||"Failed to upload logo")}finally{h(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"font-heading text-3xl mb-2",children:"Add Your Logo"}),e.jsx("p",{className:"text-muted-foreground",children:"Generate with AI, upload your own, or skip this step"})]}),t&&e.jsx("div",{className:"bg-surface/50 border border-border rounded-xl p-8 text-center",children:e.jsx("img",{src:t,alt:"Logo preview",className:"max-h-48 mx-auto rounded-lg"})}),e.jsxs("div",{className:"bg-surface/50 border border-border rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[e.jsx(N,{className:"w-5 h-5"}),e.jsx("h3",{className:"font-heading font-semibold",children:"Generate with AI"})]}),e.jsx(S,{placeholder:"Describe your logo (e.g., minimalist mountain peak, tech startup vibe)",value:l,onChange:r=>v(r.target.value),disabled:m}),e.jsx(c,{onClick:U,disabled:m||!l.trim(),className:"w-full",children:m?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Generate Logo"]})})]}),e.jsxs("div",{className:"bg-surface/50 border border-border rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[e.jsx(F,{className:"w-5 h-5"}),e.jsx("h3",{className:"font-heading font-semibold",children:"Upload Your Own"})]}),e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:k,disabled:p,className:"hidden",id:"logo-upload"}),e.jsx(c,{variant:"outline",className:"w-full",disabled:p,onClick:()=>{var r;return(r=document.getElementById("logo-upload"))==null?void 0:r.click()},children:p?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Choose File"]})})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(c,{variant:"outline",onClick:()=>y(),className:"flex-1",children:"Skip for Now"}),e.jsx(c,{onClick:()=>w(t),disabled:!t,className:"flex-1",children:"Continue"})]})]})}export{q as LogoStep};
