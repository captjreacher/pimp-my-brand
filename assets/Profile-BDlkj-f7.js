var es=Object.defineProperty;var ss=(r,c,o)=>c in r?es(r,c,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[c]=o;var he=(r,c,o)=>ss(r,typeof c!="symbol"?c+"":c,o);import{j as e}from"./ui-vendor-D6k6xAJg.js";import{r as u}from"./react-vendor-CbTYwD9p.js";import{u as ts,b as rs}from"./router-vendor-BssJdvT9.js";import{c as B,a as q,X as ae,s as U,d as de}from"./index-CWAcGGyY.js";import{B as w}from"./button-ro640sRo.js";import{C as x,a as L,b as M,d as I,c as p}from"./card-CfRzuJdW.js";import{I as G}from"./input-DlTyRBPh.js";import{L as D}from"./label-3xwd5eha.js";import{T as Te}from"./textarea-DMLWv3zQ.js";import{T as Re,a as Fe,b as W,c as H}from"./tabs-D4HRQBSG.js";import{A as De,a as qe,b as Ve}from"./avatar-O_WNBdep.js";import{B as J}from"./badge-DYFFvGV6.js";import{R as as,T as is,A as ns,a as ls,b as os}from"./alert-uBs5WFiP.js";import{P as Y}from"./progress-DKtAhb_-.js";import{S as Be}from"./separator-C1i2gjVs.js";import{R as cs,a as ds}from"./radio-group-DTP_NHUv.js";import{S as ms,a as hs,b as us,c as xs,d as ps}from"./select-D-FesbXe.js";import{S as gs}from"./switch-VKeOf0Kf.js";import{C as Se}from"./camera-D0ae387A.js";import{P as me}from"./plus-htkYI_UT.js";import{G as te}from"./globe-Cn6vsqJo.js";import{L as Oe}from"./lock-Cfe6ZteI.js";import{E as ze}from"./eye-DFtfckWq.js";import{T as Pe,C as fe}from"./trending-up-CdA6vfvZ.js";import{S as Ae}from"./share-2-JdMFhlJo.js";import{C as fs}from"./calendar-BAG2bnGU.js";import{F as ue}from"./file-text-DjzqkRut.js";import{U as xe}from"./user-jdNjT8Fw.js";import{Z as js}from"./zap-C7IxjtWs.js";import{U as Le}from"./users-DVK6hSdx.js";import{A as vs}from"./award-DpAKLtWf.js";import{B as bs}from"./briefcase-B833yQK2.js";import{u as je,a as Ns,b as Me}from"./query-vendor-CKaEIWod.js";import{S as ys}from"./sparkles-3Bp2-477.js";import{C as ws}from"./chevron-left-BMjbAc_U.js";import{S as ks}from"./settings-BbPIqtu1.js";import{S as pe}from"./star-DHxkQLEH.js";import"./supabase-vendor-CYMOQS5a.js";import"./index-2c6_cF8I.js";import"./circle-BmnDPCjp.js";import"./check-Cp6OSBFl.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=B("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=B("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=B("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=B("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=B("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=B("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=B("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=B("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=B("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=B("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=B("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=B("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=B("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),Rs=[{platform:"linkedin",url:"https://linkedin.com/in/",icon:As,placeholder:"your-linkedin-username"},{platform:"twitter",url:"https://twitter.com/",icon:Is,placeholder:"your-twitter-handle"},{platform:"github",url:"https://github.com/",icon:Ss,placeholder:"your-github-username"},{platform:"instagram",url:"https://instagram.com/",icon:Ps,placeholder:"your-instagram-handle"},{platform:"youtube",url:"https://youtube.com/@",icon:Ts,placeholder:"your-youtube-channel"},{platform:"facebook",url:"https://facebook.com/",icon:Cs,placeholder:"your-facebook-page"}],Fs=["Creator","Entrepreneur","Developer","Designer","Writer","Speaker","Consultant","Coach","Athlete","Artist","Musician","Photographer","Marketer","Executive","Founder","Investor","Influencer","Educator"],Ds=["Technology","Healthcare","Finance","Education","Entertainment","Sports","Fashion","Food & Beverage","Travel","Real Estate","Automotive","Gaming","Media","Non-profit","Government","Other"],qs=({profile:r,onSave:c,isLoading:o})=>{var re,oe;const[t,d]=u.useState(r),[g,f]=u.useState(null),[N,S]=u.useState(r.avatar_url),[P,k]=u.useState(!1),[E,A]=u.useState(r.role_tags||[]),[T,F]=u.useState(""),[R,V]=u.useState(r.socials||{}),[O,m]=u.useState(!1),i=u.useRef(null),h=u.useCallback((n,v)=>{d(b=>({...b,[n]:v}))},[]),j=u.useCallback(n=>{var $;const v=($=n.target.files)==null?void 0:$[0];if(!v)return;if(!v.type.startsWith("image/")){q.error("Please select an image file");return}if(v.size>5*1024*1024){q.error("Image must be smaller than 5MB");return}f(v);const b=URL.createObjectURL(v);S(b),k(!0)},[]),_=u.useCallback(()=>{k(!1),q.success("Avatar updated")},[]),z=u.useCallback(n=>{if(!E.includes(n)&&E.length<5){const v=[...E,n];A(v),h("role_tags",v)}},[E,h]),K=u.useCallback(n=>{const v=E.filter(b=>b!==n);A(v),h("role_tags",v)},[E,h]),ie=u.useCallback((n,v)=>{const b={...R,[n]:v};V(b),h("socials",b)},[R,h]),Q=u.useCallback(n=>{const v={...R};delete v[n],V(v),h("socials",v)},[R,h]),ne=async()=>{if(!g)return null;try{const n=g.name.split(".").pop(),v=`${r.id}/avatar.${n}`,{error:b}=await U.storage.from("logos").upload(v,g,{upsert:!0});if(b)throw b;const{data:$}=U.storage.from("logos").getPublicUrl(v);return $.publicUrl}catch(n){return console.error("Avatar upload error:",n),q.error("Failed to upload avatar"),null}},le=async()=>{m(!0);try{let n=t.avatar_url;if(g){const b=await ne();b&&(n=b)}const v={display_name:t.display_name,handle:t.handle,avatar_url:n,bio:t.bio,role_tags:t.role_tags,website_url:t.website_url,socials:t.socials,visibility:t.visibility};await c(v),q.success("Profile updated successfully")}catch(n){console.error("Save error:",n),q.error("Failed to save profile")}finally{m(!1)}};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs(x,{children:[e.jsxs(L,{children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-5 w-5"}),"Profile Photo"]}),e.jsx(I,{children:"Upload a professional photo that represents your brand"})]}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(De,{className:"h-24 w-24 border-2 border-border",children:N?e.jsx(qe,{src:N,alt:t.display_name||"Profile"}):e.jsx(Ve,{className:"text-lg",children:((oe=(re=t.display_name)==null?void 0:re.charAt(0))==null?void 0:oe.toUpperCase())||"U"})}),e.jsx(w,{size:"sm",variant:"secondary",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full p-0",onClick:()=>{var n;return(n=i.current)==null?void 0:n.click()},children:e.jsx(Se,{className:"h-4 w-4"})}),e.jsx("input",{ref:i,type:"file",accept:"image/*",className:"hidden",onChange:j})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:"Upload new photo"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"JPG, PNG or GIF. Max size 5MB. Square images work best."}),P&&e.jsxs(w,{size:"sm",variant:"outline",className:"mt-2 gap-2",onClick:_,children:[e.jsx(_s,{className:"h-4 w-4"}),"Crop & Save"]})]})]})})]}),e.jsxs(x,{children:[e.jsxs(L,{children:[e.jsx(M,{children:"Basic Information"}),e.jsx(I,{children:"Your public profile information"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"display_name",children:"Display Name"}),e.jsx(G,{id:"display_name",value:t.display_name||"",onChange:n=>h("display_name",n.target.value),placeholder:"Your full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"handle",children:"Handle"}),e.jsx(G,{id:"handle",value:t.handle||"",onChange:n=>h("handle",n.target.value),placeholder:"your-unique-handle",className:"font-mono"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This will be your unique URL: /profile/your-handle"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"bio",children:"Bio"}),e.jsx(Te,{id:"bio",value:t.bio||"",onChange:n=>h("bio",n.target.value),placeholder:"Tell people about yourself and what you do...",rows:4,maxLength:500}),e.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[(t.bio||"").length,"/500 characters"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"website_url",children:"Website"}),e.jsx(G,{id:"website_url",type:"url",value:t.website_url||"",onChange:n=>h("website_url",n.target.value),placeholder:"https://yourwebsite.com"})]})]})]}),e.jsxs(x,{children:[e.jsxs(L,{children:[e.jsx(M,{children:"Professional Information"}),e.jsx(I,{children:"Help others understand your expertise and industry"})]}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(D,{children:"Role Tags (max 5)"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:E.map(n=>e.jsxs(J,{variant:"secondary",className:"gap-1",children:[n,e.jsx(w,{size:"sm",variant:"ghost",className:"h-4 w-4 p-0 hover:bg-destructive hover:text-destructive-foreground",onClick:()=>K(n),children:e.jsx(ae,{className:"h-3 w-3"})})]},n))}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Fs.filter(n=>!E.includes(n)).map(n=>e.jsxs(w,{size:"sm",variant:"outline",className:"h-8",onClick:()=>z(n),disabled:E.length>=5,children:[e.jsx(me,{className:"h-3 w-3 mr-1"}),n]},n))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"industry",children:"Industry"}),e.jsxs(ms,{value:T,onValueChange:F,children:[e.jsx(hs,{children:e.jsx(us,{placeholder:"Select your industry"})}),e.jsx(xs,{children:Ds.map(n=>e.jsx(ps,{value:n,children:n},n))})]})]})]})]}),e.jsxs(x,{children:[e.jsxs(L,{children:[e.jsx(M,{children:"Social Links"}),e.jsx(I,{children:"Connect your social media profiles"})]}),e.jsx(p,{className:"space-y-4",children:Rs.map(n=>{const v=n.icon,b=R[n.platform]||"";return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 w-32",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium capitalize",children:n.platform})]}),e.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:n.url}),e.jsx(G,{value:b,onChange:$=>ie(n.platform,$.target.value),placeholder:n.placeholder,className:"flex-1"}),b&&e.jsx(w,{size:"sm",variant:"ghost",onClick:()=>Q(n.platform),children:e.jsx(ae,{className:"h-4 w-4"})})]})]},n.platform)})})]}),e.jsxs(x,{children:[e.jsxs(L,{children:[e.jsx(M,{children:"Privacy & Visibility"}),e.jsx(I,{children:"Control who can see your profile and content"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.visibility==="public"?e.jsx(te,{className:"h-4 w-4 text-green-600"}):e.jsx(Oe,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"font-medium",children:t.visibility==="public"?"Public Profile":"Private Profile"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.visibility==="public"?"Your profile is visible to everyone and appears in search results":"Your profile is only visible to you and people you share it with"})]}),e.jsx(gs,{checked:t.visibility==="public",onCheckedChange:n=>h("visibility",n?"public":"private")})]}),e.jsx(Be,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(ze,{className:"h-4 w-4"}),"Profile Visibility Settings"]}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("p",{children:"• Public profiles appear in the community gallery"}),e.jsx("p",{children:"• Public profiles can be found via search engines"}),e.jsx("p",{children:"• You can always change this setting later"}),e.jsx("p",{children:"• Individual brand materials have their own privacy settings"})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(w,{onClick:le,disabled:O||o,className:"gap-2",children:O?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Saving..."]}):"Save Profile"})})]})},ee=class ee{constructor(){he(this,"userId",null)}static getInstance(){return ee.instance||(ee.instance=new ee),ee.instance}async initialize(c){this.userId=c}async trackProfileView(c,o){try{const t={profile_id:c,viewer_id:o,ip_address:await this.getClientIP(),user_agent:navigator.userAgent,referrer:document.referrer||null,viewed_at:new Date().toISOString()},d=this.getStoredViews();return d.push(t),localStorage.setItem("profile_views",JSON.stringify(d)),t}catch(t){console.error("Error tracking profile view:",t)}}async trackContentEngagement(c,o,t,d){try{const g={content_id:c,content_type:o,action:t,timestamp:new Date().toISOString(),metadata:d},f=this.getStoredEngagements();return f.push(g),localStorage.setItem("content_engagements",JSON.stringify(f)),g}catch(g){console.error("Error tracking content engagement:",g)}}async getProfileAnalytics(c){try{const o=this.getStoredViews().filter(i=>i.profile_id===c),t=this.getStoredEngagements(),[d,g,f]=await Promise.all([U.from("brands").select("id, visibility, created_at").eq("user_id",c),U.from("cvs").select("id, visibility, created_at").eq("user_id",c),U.from("shares").select("id, kind, created_at").eq("user_id",c)]),N=d.data||[],S=g.data||[],P=f.data||[],k=o.length,E=t.filter(i=>i.content_type==="brand"&&i.action==="view").length,A=t.filter(i=>i.content_type==="cv"&&i.action==="view").length,T=P.length,F=new Date;F.setDate(F.getDate()-30);const R=o.filter(i=>new Date(i.viewed_at)>F),V=t.filter(i=>new Date(i.timestamp)>F),O=new Set(o.map(i=>i.viewer_id||i.ip_address)).size,m=k/30;return{profile_views:k,brand_views:E,cv_views:A,shares_count:T,public_brands_count:N.filter(i=>i.visibility==="public").length,public_cvs_count:S.filter(i=>i.visibility==="public").length,total_brands_count:N.length,total_cvs_count:S.length,unique_viewers:O,recent_views_30d:R.length,recent_engagements_30d:V.length,avg_views_per_day:Math.round(m*10)/10,engagement_rate:k>0?Math.round(V.length/k*100):0,growth_trend:this.calculateGrowthTrend(o),top_content:this.getTopContent(t,N,S),viewer_insights:this.getViewerInsights(o)}}catch(o){return console.error("Error getting profile analytics:",o),null}}async getNetworkInsights(c){try{const o=this.getStoredViews().filter(d=>d.profile_id===c),t=new Set(o.map(d=>d.viewer_id||d.ip_address)).size;return{total_connections:t,industry_breakdown:{Technology:Math.floor(t*.4),Marketing:Math.floor(t*.25),Design:Math.floor(t*.15),Business:Math.floor(t*.1),Other:Math.floor(t*.1)},role_breakdown:{"Individual Contributors":Math.floor(t*.5),Managers:Math.floor(t*.3),Executives:Math.floor(t*.15),Students:Math.floor(t*.05)},geographic_distribution:{"North America":Math.floor(t*.45),Europe:Math.floor(t*.3),Asia:Math.floor(t*.15),Other:Math.floor(t*.1)},engagement_score:Math.min(Math.floor(t*2.5+o.length*1.2),100)}}catch(o){return console.error("Error getting network insights:",o),null}}getStoredViews(){try{return JSON.parse(localStorage.getItem("profile_views")||"[]")}catch{return[]}}getStoredEngagements(){try{return JSON.parse(localStorage.getItem("content_engagements")||"[]")}catch{return[]}}async getClientIP(){try{return null}catch{return null}}calculateGrowthTrend(c){if(c.length<2)return"stable";const o=new Date,t=new Date(o.getTime()-7*24*60*60*1e3),d=new Date(o.getTime()-14*24*60*60*1e3),g=c.filter(N=>new Date(N.viewed_at)>t).length,f=c.filter(N=>{const S=new Date(N.viewed_at);return S>d&&S<=t}).length;return g>f?"up":g<f?"down":"stable"}getTopContent(c,o,t){const d=c.reduce((f,N)=>(f[N.content_id]=(f[N.content_id]||0)+1,f),{});return Object.entries(d).sort(([,f],[,N])=>N-f).slice(0,5).map(([f,N])=>{const S=o.find(k=>k.id===f),P=t.find(k=>k.id===f);return{id:f,title:(S==null?void 0:S.title)||(P==null?void 0:P.title)||"Unknown",type:S?"brand":"cv",engagement_count:N}})}getViewerInsights(c){const o=c.reduce((d,g)=>{const f=g.referrer||"Direct";return d[f]=(d[f]||0)+1,d},{});return{top_referrers:Object.entries(o).sort(([,d],[,g])=>g-d).slice(0,5).map(([d,g])=>({referrer:d,count:g})),total_unique_viewers:new Set(c.map(d=>d.viewer_id||d.ip_address)).size}}};he(ee,"instance");let ve=ee;const Z=ve.getInstance(),Vs=({analytics:r,isLoading:c,userId:o})=>{var R,V,O;const[t,d]=u.useState(null),[g,f]=u.useState(!1),[N,S]=u.useState("overview");u.useEffect(()=>{o&&N==="network"&&P()},[o,N]);const P=async()=>{if(o){f(!0);try{const m=await Z.getNetworkInsights(o);d(m)}catch(m){console.error("Error loading network insights:",m)}finally{f(!1)}}},k=async()=>{if(o)try{await Z.getProfileAnalytics(o),N==="network"&&await P()}catch(m){console.error("Error refreshing analytics:",m)}},E=m=>{switch(m){case"up":return e.jsx(Pe,{className:"h-4 w-4 text-green-600"});case"down":return e.jsx(is,{className:"h-4 w-4 text-red-600"});default:return e.jsx(Ms,{className:"h-4 w-4 text-gray-600"})}};if(c)return e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((m,i)=>e.jsx(x,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-8 bg-muted rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-full"})]})})},i))});const A=r.profile_views+r.brand_views+r.cv_views,T=r.total_brands_count>0?Math.round(r.public_brands_count/r.total_brands_count*100):0,F=Math.min(Math.round((r.shares_count*10+A)/10),100);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Analytics & Insights"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your profile performance and audience engagement"})]}),e.jsxs(w,{variant:"outline",onClick:k,className:"gap-2",children:[e.jsx(as,{className:"h-4 w-4"}),"Refresh"]})]}),e.jsxs(Re,{value:N,onValueChange:S,children:[e.jsxs(Fe,{className:"grid w-full grid-cols-3",children:[e.jsx(W,{value:"overview",children:"Overview"}),e.jsx(W,{value:"performance",children:"Performance"}),e.jsx(W,{value:"network",children:"Network"})]}),e.jsxs(H,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(x,{children:e.jsxs(p,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Views"}),e.jsx("p",{className:"text-2xl font-bold",children:A.toLocaleString()})]}),e.jsx(ze,{className:"h-8 w-8 text-primary"})]}),e.jsxs("div",{className:"mt-4 flex items-center text-xs text-muted-foreground",children:[e.jsx(Pe,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:"Across all content"})]})]})}),e.jsx(x,{children:e.jsxs(p,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Shares"}),e.jsx("p",{className:"text-2xl font-bold",children:r.shares_count})]}),e.jsx(Ae,{className:"h-8 w-8 text-green-600"})]}),e.jsxs("div",{className:"mt-4 flex items-center text-xs text-muted-foreground",children:[e.jsx(fs,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:"All time"})]})]})}),e.jsx(x,{children:e.jsxs(p,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Brand Materials"}),e.jsx("p",{className:"text-2xl font-bold",children:r.total_brands_count})]}),e.jsx(ue,{className:"h-8 w-8 text-blue-600"})]}),e.jsx("div",{className:"mt-4 flex items-center gap-2",children:e.jsxs(J,{variant:"outline",className:"text-xs",children:[e.jsx(te,{className:"h-3 w-3 mr-1"}),r.public_brands_count," public"]})})]})}),e.jsx(x,{children:e.jsxs(p,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"CVs"}),e.jsx("p",{className:"text-2xl font-bold",children:r.total_cvs_count})]}),e.jsx(xe,{className:"h-8 w-8 text-purple-600"})]}),e.jsx("div",{className:"mt-4 flex items-center gap-2",children:e.jsxs(J,{variant:"outline",className:"text-xs",children:[e.jsx(te,{className:"h-3 w-3 mr-1"}),r.public_cvs_count," public"]})})]})})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(x,{children:[e.jsxs(L,{children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5"}),"Content Performance"]}),e.jsx(I,{children:"Breakdown of views across your content types"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-primary"}),"Profile Views"]}),e.jsx("span",{className:"font-medium",children:r.profile_views})]}),e.jsx(Y,{value:A>0?r.profile_views/A*100:0,className:"h-2"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4 text-blue-600"}),"Brand Views"]}),e.jsx("span",{className:"font-medium",children:r.brand_views})]}),e.jsx(Y,{value:A>0?r.brand_views/A*100:0,className:"h-2"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-purple-600"}),"CV Views"]}),e.jsx("span",{className:"font-medium",children:r.cv_views})]}),e.jsx(Y,{value:A>0?r.cv_views/A*100:0,className:"h-2"})]})]})]}),e.jsxs(x,{children:[e.jsxs(L,{children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"}),"Visibility & Engagement"]}),e.jsx(I,{children:"How discoverable and engaging your content is"})]}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Public Content"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[T,"%"]})]}),e.jsx(Y,{value:T,className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.public_brands_count+r.public_cvs_count," of ",r.total_brands_count+r.total_cvs_count," items are public"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Engagement Score"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[F,"/100"]})]}),e.jsx(Y,{value:F,className:"h-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Based on views, shares, and content quality"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-green-600 mb-1",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Public"})]}),e.jsx("p",{className:"text-2xl font-bold",children:r.public_brands_count+r.public_cvs_count})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-orange-600 mb-1",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Private"})]}),e.jsx("p",{className:"text-2xl font-bold",children:r.total_brands_count+r.total_cvs_count-(r.public_brands_count+r.public_cvs_count)})]})]})]})]})]}),e.jsxs(x,{children:[e.jsxs(L,{children:[e.jsx(M,{children:"Professional Insights"}),e.jsx(I,{children:"Recommendations to improve your profile performance"})]}),e.jsx(p,{children:e.jsxs("div",{className:"space-y-4",children:[r.public_brands_count===0&&r.total_brands_count>0&&e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[e.jsx(te,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Make your content discoverable"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-200 mt-1",children:"Consider making some of your brand materials public to increase visibility and attract opportunities."})]})]}),r.shares_count===0&&r.total_brands_count>0&&e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-50 dark:bg-green-950/20 rounded-lg",children:[e.jsx(Ae,{className:"h-5 w-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900 dark:text-green-100",children:"Start sharing your work"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-200 mt-1",children:"Share your brand materials with colleagues and on social media to increase engagement."})]})]}),r.total_brands_count<3&&e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-purple-50 dark:bg-purple-950/20 rounded-lg",children:[e.jsx(ue,{className:"h-5 w-5 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-purple-900 dark:text-purple-100",children:"Build your portfolio"}),e.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-200 mt-1",children:"Create more brand materials to showcase different aspects of your professional identity."})]})]})]})})]})]}),e.jsxs(H,{value:"performance",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(x,{children:[e.jsxs(L,{children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-5 w-5"}),"Engagement Metrics"]}),e.jsx(I,{children:"How your audience interacts with your content"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Engagement Rate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-bold",children:[r.engagement_rate||0,"%"]}),E(r.growth_trend)]})]}),e.jsx(Y,{value:r.engagement_rate||0,className:"h-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:r.unique_viewers||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique Viewers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:r.avg_views_per_day||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Views/Day"})]})]})]})]}),e.jsxs(x,{children:[e.jsxs(L,{children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"h-5 w-5"}),"Top Performing Content"]}),e.jsx(I,{children:"Your most engaging brand materials and CVs"})]}),e.jsx(p,{children:r.top_content&&r.top_content.length>0?e.jsx("div",{className:"space-y-3",children:r.top_content.map((m,i)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-bold",children:i+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:m.title}),e.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:m.type})]})]}),e.jsxs(J,{variant:"secondary",children:[m.engagement_count," views"]})]},m.id))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No content engagement data yet"})})]})]}),e.jsxs(x,{children:[e.jsxs(L,{children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5"}),"Traffic Sources"]}),e.jsx(I,{children:"Where your profile visitors are coming from"})]}),e.jsx(p,{children:(R=r.viewer_insights)!=null&&R.top_referrers&&r.viewer_insights.top_referrers.length>0?e.jsx("div",{className:"space-y-3",children:r.viewer_insights.top_referrers.map((m,i)=>{var h;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:m.referrer==="Direct"?"Direct Traffic":m.referrer}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${m.count/(((h=r.viewer_insights)==null?void 0:h.total_unique_viewers)||1)*100}%`}})}),e.jsx("span",{className:"text-sm text-muted-foreground w-8 text-right",children:m.count})]})]},i)})}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No traffic source data available yet"})})]})]}),e.jsx(H,{value:"network",className:"space-y-6",children:g?e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Array.from({length:4}).map((m,i)=>e.jsx(x,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-8 bg-muted rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-full"})]})})},i))}):t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(x,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Connections"}),e.jsx("p",{className:"text-2xl font-bold",children:t.total_connections})]}),e.jsx(Le,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(x,{children:e.jsxs(p,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Engagement Score"}),e.jsx("p",{className:"text-2xl font-bold",children:t.engagement_score})]}),e.jsx(vs,{className:"h-8 w-8 text-yellow-600"})]}),e.jsx("div",{className:"mt-4",children:e.jsx(Y,{value:t.engagement_score,className:"h-2"})})]})}),e.jsx(x,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Top Industry"}),e.jsx("p",{className:"text-lg font-bold",children:((V=Object.entries(t.industry_breakdown).sort(([,m],[,i])=>i-m)[0])==null?void 0:V[0])||"N/A"})]}),e.jsx(bs,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(x,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Top Region"}),e.jsx("p",{className:"text-lg font-bold",children:((O=Object.entries(t.geographic_distribution).sort(([,m],[,i])=>i-m)[0])==null?void 0:O[0])||"N/A"})]}),e.jsx(Ls,{className:"h-8 w-8 text-purple-600"})]})})})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs(x,{children:[e.jsx(L,{children:e.jsx(M,{className:"text-lg",children:"Industry Breakdown"})}),e.jsx(p,{className:"space-y-3",children:Object.entries(t.industry_breakdown).sort(([,m],[,i])=>i-m).map(([m,i])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:m}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${i/t.total_connections*100}%`}})}),e.jsx("span",{className:"text-sm text-muted-foreground w-6 text-right",children:i})]})]},m))})]}),e.jsxs(x,{children:[e.jsx(L,{children:e.jsx(M,{className:"text-lg",children:"Role Distribution"})}),e.jsx(p,{className:"space-y-3",children:Object.entries(t.role_breakdown).sort(([,m],[,i])=>i-m).map(([m,i])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:m}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${i/t.total_connections*100}%`}})}),e.jsx("span",{className:"text-sm text-muted-foreground w-6 text-right",children:i})]})]},m))})]}),e.jsxs(x,{children:[e.jsx(L,{children:e.jsx(M,{className:"text-lg",children:"Geographic Reach"})}),e.jsx(p,{className:"space-y-3",children:Object.entries(t.geographic_distribution).sort(([,m],[,i])=>i-m).map(([m,i])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:m}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${i/t.total_connections*100}%`}})}),e.jsx("span",{className:"text-sm text-muted-foreground w-6 text-right",children:i})]})]},m))})]})]})]}):e.jsx(x,{children:e.jsxs(p,{className:"p-6 text-center",children:[e.jsx(Le,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"font-medium mb-2",children:"No Network Data Available"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Start sharing your profile to build your professional network insights."}),e.jsx(w,{onClick:P,variant:"outline",children:"Load Network Insights"})]})})})]})]})},Bs=r=>{const[c,o]=u.useState(!1);u.useEffect(()=>{r&&!c&&(Z.initialize(r),o(!0))},[r,c]);const{data:t,isLoading:d,refetch:g}=je({queryKey:["enhanced-profile-analytics",r],queryFn:async()=>{if(!r)throw new Error("No user ID provided");return await Z.getProfileAnalytics(r)},enabled:!!r&&c,refetchInterval:5*60*1e3,staleTime:2*60*1e3});return{enhancedAnalytics:t,isLoadingEnhanced:d,refetchAnalytics:g,trackProfileView:async P=>{if(r)return await Z.trackProfileView(r,P)},trackContentEngagement:async(P,k,E,A)=>await Z.trackContentEngagement(P,k,E,A),getNetworkInsights:async()=>r?await Z.getNetworkInsights(r):null,isInitialized:c}},Os=r=>{const c=Ns(),[o,t]=u.useState(null);u.useEffect(()=>{(async()=>{const{data:{user:j}}=await U.auth.getUser();t((j==null?void 0:j.id)||null)})()},[]);const d=o,{enhancedAnalytics:g,isLoadingEnhanced:f,trackProfileView:N,trackContentEngagement:S}=Bs(d),{data:P,isLoading:k,error:E}=je({queryKey:["profile",d],queryFn:async()=>{if(!d)throw new Error("No user ID provided");const{data:h,error:j}=await U.from("profiles").select("*").eq("id",d).single();if(j)throw j;return h},enabled:!!d}),{data:A,isLoading:T}=je({queryKey:["profile-analytics",d],queryFn:async()=>{if(!d)throw new Error("No user ID provided");const[h,j,_]=await Promise.all([U.from("brands").select("id, visibility").eq("user_id",d),U.from("cvs").select("id, visibility").eq("user_id",d),U.from("shares").select("id").eq("user_id",d)]),z=h.data||[],K=j.data||[];return{profile_views:0,brand_views:0,cv_views:0,shares_count:(_.data||[]).length,public_brands_count:z.filter(Q=>Q.visibility==="public").length,public_cvs_count:K.filter(Q=>Q.visibility==="public").length,total_brands_count:z.length,total_cvs_count:K.length}},enabled:!!d}),F=Me({mutationFn:async h=>{if(!o)throw new Error("Not authenticated");const{data:j,error:_}=await U.from("profiles").update(h).eq("id",o).select().single();if(_)throw _;return j},onSuccess:h=>{c.setQueryData(["profile",o],h),c.invalidateQueries({queryKey:["profile-analytics",o]})},onError:h=>{console.error("Profile update error:",h),q.error("Failed to update profile")}}),R=Me({mutationFn:async h=>{if(!o)throw new Error("Not authenticated");const{data:j,error:_}=await U.from("profiles").insert({id:o,...h}).select().single();if(_)throw _;return j},onSuccess:h=>{c.setQueryData(["profile",o],h),c.invalidateQueries({queryKey:["profile-analytics",o]})},onError:h=>{console.error("Profile creation error:",h),q.error("Failed to create profile")}}),V=async h=>{if(!h||h.length<3)return!1;try{const{data:j,error:_}=await U.from("profiles").select("id").eq("handle",h).neq("id",o||"");if(_)throw _;return j.length===0}catch(j){return console.error("Handle check error:",j),!1}},O=async h=>{try{const{data:j,error:_}=await U.from("profiles").select("*").eq("handle",h).eq("visibility","public").single();if(_)throw _;return j}catch(j){return console.error("Profile fetch error:",j),null}};return{profile:P,analytics:g||A,isLoading:k||T||f,isLoadingProfile:k,isLoadingAnalytics:T,error:E,updateProfile:async h=>new Promise((j,_)=>{F.mutate(h,{onSuccess:()=>j(),onError:z=>_(z)})}),createProfile:async h=>new Promise((j,_)=>{R.mutate(h,{onSuccess:()=>j(),onError:z=>_(z)})}),isUpdating:F.isPending,isCreating:R.isPending,checkHandleAvailability:V,getProfileByHandle:O,trackProfileView:N,trackContentEngagement:S}},Ie=[{id:"sample-ufc",title:"Octagon Overdrive",tagline:"Fight-night ready hype deck",format_preset:"ufc",created_at:new Date().toISOString(),logo_url:"https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?auto=format&fit=crop&w=200&q=60"},{id:"sample-influencer",title:"Creator Pulse",tagline:"Lifestyle storyteller brand kit",format_preset:"influencer",created_at:new Date().toISOString(),logo_url:"https://images.unsplash.com/photo-1545239351-1141bd82e8a6?auto=format&fit=crop&w=200&q=60"}],zs=[{id:"logo-aurora",url:"https://images.unsplash.com/photo-1523475472560-d2df97ec485c?auto=format&fit=crop&w=300&q=60",label:"Aurora Monogram",type:"logo"},{id:"logo-neon",url:"https://images.unsplash.com/photo-1529429617124-aee0a249c5f9?auto=format&fit=crop&w=300&q=60",label:"Neon Crest",type:"logo"}],Gs=[{id:"photo-stage",url:"https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?auto=format&fit=crop&w=400&q=60",label:"Stage Spotlight",type:"photo"},{id:"photo-urban",url:"https://images.unsplash.com/photo-1504593811423-6dd665756598?auto=format&fit=crop&w=400&q=60",label:"Urban Energy",type:"photo"}],$s=[{id:"tier-rising",name:"Rising Star",description:"Launch looks crafted for new creators finding their voice.",unlocked:!0,items:["Launch Night bomber","Signature streetwear set"]},{id:"tier-pro",name:"Pro Spotlight",description:"Premium wardrobe palette for paid appearances and partnerships.",unlocked:!1,items:["Press conference suit","Luxury athleisure kit"]},{id:"tier-icon",name:"Icon Status",description:"Bespoke couture and statement armor reserved for elite campaigns.",unlocked:!1,items:["Custom couture suit","Championship walk-out cape"]}],Ue=[{templateId:"ufc",templateName:"Octagon Champion",description:"Select the fight kit that appears across UFC-style templates.",options:[{id:"fight-night",name:"Fight Night Classic",description:"Default crimson walkout gear included with every account.",tier:"free"},{id:"championship-gold",name:"Championship Gold",description:"Pro members unlock gold trim, banner lighting, and entrance FX.",tier:"pro"},{id:"legacy-immortal",name:"Legacy Immortal",description:"Elite-exclusive holographic robe with pyro choreography.",tier:"elite"}]},{templateId:"team",templateName:"Club Captain",description:"Define the jersey used in team and league decks.",options:[{id:"home-tipoff",name:"Home Tip-Off",description:"Traditional home colors—free for every roster.",tier:"free"},{id:"city-edition",name:"City Edition",description:"Pro upgrade featuring neon trim and alternate shorts.",tier:"pro"},{id:"legends-throwback",name:"Legends Throwback",description:"Elite throwback set with tunnel camera overlays.",tier:"elite"}]},{templateId:"nfl",templateName:"Primetime Receiver",description:"Control the uniforms appearing in American football templates.",options:[{id:"primetime-home",name:"Primetime Home",description:"Baseline kit, optimized for quick exports and highlights.",tier:"free"},{id:"color-rush",name:"Color Rush",description:"Pro members add LED tunnel intros and alternate jerseys.",tier:"pro"},{id:"hall-of-fame",name:"Hall of Fame",description:"Elite sequence with gold jacket ceremony visuals.",tier:"elite"}]},{templateId:"executive",templateName:"Boardroom Visionary",description:"Dress the executive persona for keynotes and investor decks.",options:[{id:"boardroom-foundation",name:"Boardroom Foundation",description:"Tailored charcoal suit—always free.",tier:"free"},{id:"global-keynote",name:"Global Keynote",description:"Pro upgrade with spotlight stage and choreographed camera moves.",tier:"pro"},{id:"future-forward",name:"Future Forward",description:"Elite couture featuring kinetic LED backdrop.",tier:"elite"}]}],Ut=()=>{var Ce;const r=ts(),[c,o]=rs(),[t,d]=u.useState(null),[g,f]=u.useState(!0),[N,S]=u.useState(c.get("tab")??"overview"),[P,k]=u.useState([]),[E,A]=u.useState(!0),[T,F]=u.useState([]),[R,V]=u.useState(zs),[O,m]=u.useState(Gs),[i,h]=u.useState($s),[j,_]=u.useState({}),[z,K]=u.useState(null),[ie,Q]=u.useState(()=>Ue.reduce((s,a)=>{var l;return s[a.templateId]=((l=a.options[0])==null?void 0:l.id)??"",s},{})),ne=u.useRef([]),{profile:le,analytics:re,isLoading:oe,updateProfile:n,isUpdating:v}=Os(),[b,$]=u.useState({fullName:"Jordan Rivers",headline:"Creator & Brand Strategist",email:"jordan.rivers@example.com",location:"Los Angeles, CA",bio:"Former professional athlete turned global brand spokesperson. I partner with future-facing companies to create immersive fan experiences and electrifying product launches.",website:"https://maximised.ai",social:"@jordanrivers"});u.useEffect(()=>{(async()=>{const{data:l}=await U.auth.getSession();l.session&&be(l.session),d(l.session),f(!1)})();const{data:{subscription:a}}=U.auth.onAuthStateChange((l,y)=>{d(y),y&&be(y)});return()=>{a.unsubscribe(),ne.current.forEach(l=>URL.revokeObjectURL(l))}},[]),u.useEffect(()=>{g||(t!=null&&t.user?Ge(t.user.id):(k(Ie),A(!1)))},[g,t]),u.useEffect(()=>{const s=c.get("tab")??"overview";S(s)},[c]);const be=s=>{const a=s.user.user_metadata||{};$(l=>({...l,fullName:a.full_name||a.name||l.fullName,headline:a.headline||l.headline,email:s.user.email||l.email,location:a.location||l.location,bio:a.bio||l.bio,website:a.website||l.website,social:a.social||l.social})),a.avatar_url&&K(a.avatar_url)},Ge=async s=>{A(!0);try{const{data:a,error:l}=await U.from("brands").select("id, title, tagline, format_preset, created_at, logo_url").eq("user_id",s).order("created_at",{ascending:!1});if(l)throw l;k(a||[])}catch(a){console.error("Error loading brands",a),q.error("We couldn't load your brands. Showing a sample view instead."),k(Ie)}finally{A(!1)}},Ne=s=>{S(s);const a=new URLSearchParams(c);a.set("tab",s),o(a,{replace:!0})},X=(s,a)=>{$(l=>({...l,[s]:a}))},$e=()=>{q.success("Profile preferences saved")},ye=s=>(ne.current.push(s),s),We=s=>{var y;const a=(y=s.target.files)==null?void 0:y[0];if(!a)return;const l=ye(URL.createObjectURL(a));K(l),q.success("Avatar updated")},we=(s,a)=>{const l=s.target.files;if(!(l!=null&&l.length))return;const y=Array.from(l).map(C=>({id:`${a}-${C.name}-${crypto.randomUUID()}`,url:ye(URL.createObjectURL(C)),label:C.name,type:a,fromUpload:!0}));a==="logo"?V(C=>[...y,...C]):m(C=>[...y,...C]),q.success(`${y.length} new ${a==="logo"?"logos":"photos"} added`)},ke=(s,a)=>{const l=y=>y.filter(C=>(C.id===a&&C.fromUpload&&URL.revokeObjectURL(C.url),C.id!==a));s==="logo"?V(l):m(l)},_e=s=>{F(a=>a.includes(s)?a.filter(l=>l!==s):[...a,s])},se=i.filter(s=>s.unlocked).length,He=Math.round(se/i.length*100),Ye=u.useMemo(()=>se>=i.length?"Icon Status":se>=2?"Pro Spotlight":"Rising Star",[se,i.length]),Je=s=>{h(l=>l.map(y=>y.id===s?{...y,unlocked:!0}:y));const a=i.find(l=>l.id===s);a&&q.success(`${a.name} tier unlocked`)},Ke=s=>{var y;const a=(y=j[s])==null?void 0:y.trim();if(!a)return;h(C=>C.map(ce=>ce.id===s?{...ce,items:[...ce.items,a]}:ce)),_(C=>({...C,[s]:""}));const l=i.find(C=>C.id===s);l&&q.success(`Added "${a}" to ${l.name}`)},Qe=(s,a)=>{h(l=>l.map(y=>y.id===s?{...y,items:y.items.filter(C=>C!==a)}:y))},Xe=T.length,Ze=(s,a)=>{Q(l=>({...l,[s]:a}))};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b border-border bg-surface/70 backdrop-blur",children:e.jsxs("div",{className:"container mx-auto px-6 py-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 text-primary",children:[e.jsx(ys,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium uppercase tracking-wide",children:"Personal Command Center"})]}),e.jsx("h1",{className:"font-heading text-3xl md:text-4xl font-bold mt-2",children:"Profile & Assets"}),e.jsx("p",{className:"text-muted-foreground mt-2 max-w-2xl",children:"Configure how the world sees you, manage your media library, and curate wardrobe looks as you progress through tiers."})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(w,{variant:"outline",onClick:()=>r("/dashboard"),className:"gap-2",children:[e.jsx(ws,{className:"h-4 w-4"}),"Back to dashboard"]})})]})}),e.jsx("main",{className:"container mx-auto px-6 py-10",children:e.jsxs(Re,{value:N,onValueChange:Ne,className:"space-y-8",children:[e.jsxs(Fe,{className:"flex flex-wrap gap-2 bg-surface/80 p-2",children:[e.jsx(W,{value:"overview",children:"Overview"}),e.jsxs(W,{value:"editor",className:"gap-2",children:[e.jsx(ks,{className:"h-4 w-4"}),"Profile Editor"]}),e.jsxs(W,{value:"analytics",className:"gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Analytics"]}),e.jsx(W,{value:"media",children:"Avatar & Media"}),e.jsx(W,{value:"wardrobe",children:"Wardrobe Path"}),e.jsx(W,{value:"brands",children:"My Brands"})]}),e.jsxs(H,{value:"overview",className:"space-y-8",children:[!t&&!g&&e.jsxs(ns,{className:"border-primary/40 bg-primary/5",children:[e.jsx(ls,{children:"Preview mode"}),e.jsx(os,{children:"Sign in to sync these settings with your account. You're viewing a sample profile so you can explore the layout."})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[e.jsxs(x,{className:"border-border/60",children:[e.jsxs(L,{children:[e.jsx(M,{children:"Profile details"}),e.jsx(I,{children:"Personal information is used to tailor generated brand riders and voice tone."})]}),e.jsx(p,{children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[e.jsxs("div",{className:"relative h-24 w-24",children:[e.jsx(De,{className:"h-24 w-24 border border-border",children:z?e.jsx(qe,{src:z,alt:b.fullName}):e.jsx(Ve,{children:b.fullName.split(" ").map(s=>s[0]).join("").slice(0,2).toUpperCase()})}),e.jsx("label",{htmlFor:"avatar-upload",className:"absolute -bottom-2 -right-2 inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-full border border-border bg-surface shadow-md transition hover:bg-surface/80",children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:We})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-heading text-xl",children:b.fullName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your avatar to align with the latest campaign identity."})]})]}),e.jsx(Be,{className:"bg-border/60"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"fullName",children:"Full name"}),e.jsx(G,{id:"fullName",value:b.fullName,onChange:s=>X("fullName",s.target.value),placeholder:"Your full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"headline",children:"Headline"}),e.jsx(G,{id:"headline",value:b.headline,onChange:s=>X("headline",s.target.value),placeholder:"Creator & Brand Strategist"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"email",children:"Contact email"}),e.jsx(G,{id:"email",type:"email",value:b.email,onChange:s=>X("email",s.target.value),placeholder:"name@brand.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"location",children:"Base city"}),e.jsx(G,{id:"location",value:b.location,onChange:s=>X("location",s.target.value),placeholder:"Where do you operate from?"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"website",children:"Website"}),e.jsx(G,{id:"website",value:b.website,onChange:s=>X("website",s.target.value),placeholder:"https://yourdomain.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"social",children:"Primary social handle"}),e.jsx(G,{id:"social",value:b.social,onChange:s=>X("social",s.target.value),placeholder:"@yourhandle"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"bio",children:"Bio"}),e.jsx(Te,{id:"bio",value:b.bio,onChange:s=>X("bio",s.target.value),rows:5,placeholder:"Tell us about your story and unique voice."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(w,{onClick:$e,className:"gap-2",children:[e.jsx(Us,{className:"h-4 w-4"}),"Save profile"]})})]})})]}),e.jsxs(x,{className:"border-border/60",children:[e.jsxs(L,{children:[e.jsx(M,{children:"Account snapshot"}),e.jsx(I,{children:"Track your progress through wardrobe tiers and saved brand kits."})]}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-2xl bg-gradient-to-br from-primary/15 via-primary/5 to-secondary/10 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Membership tier"}),e.jsx("h3",{className:"font-heading text-2xl font-semibold mt-1",children:Ye})]}),e.jsxs(J,{variant:"outline",className:"border-primary/40 text-primary",children:[se,"/",i.length," tiers"]})]}),e.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:"Unlock more tiers by publishing brands and keeping your media library fresh."})]}),e.jsxs("div",{className:"grid gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-border/70 bg-surface/60 px-4 py-3",children:[e.jsx("span",{className:"text-muted-foreground",children:"Brand kits saved"}),e.jsx("span",{className:"font-semibold",children:P.length})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-border/70 bg-surface/60 px-4 py-3",children:[e.jsx("span",{className:"text-muted-foreground",children:"Favourited kits"}),e.jsx("span",{className:"font-semibold",children:Xe})]})]}),e.jsxs(w,{variant:"secondary",className:"w-full gap-2",onClick:()=>Ne("brands"),children:["Manage my brands",e.jsx(Ee,{className:"h-4 w-4"})]})]})]})]})]}),e.jsx(H,{value:"editor",className:"space-y-8",children:le?e.jsx(qs,{profile:le,onSave:n,isLoading:v}):e.jsx(x,{children:e.jsx(p,{className:"p-6",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading profile..."})})})})}),e.jsx(H,{value:"analytics",className:"space-y-8",children:re?e.jsx(Vs,{analytics:re,isLoading:oe,userId:(Ce=t==null?void 0:t.user)==null?void 0:Ce.id}):e.jsx(x,{children:e.jsx(p,{className:"p-6",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading analytics..."})})})})}),e.jsx(H,{value:"media",className:"space-y-8",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(x,{className:"border-border/60",children:[e.jsxs(L,{children:[e.jsx(M,{children:"Logos & marks"}),e.jsx(I,{children:"Upload brand marks, monograms, or sponsor logos to keep them handy during template generation."})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("label",{htmlFor:"logo-upload",className:"flex cursor-pointer flex-col items-center justify-center rounded-2xl border border-dashed border-border/80 bg-surface/40 p-6 text-center transition hover:border-primary/60 hover:bg-surface/60",children:[e.jsx(ge,{className:"h-6 w-6 text-primary"}),e.jsx("span",{className:"mt-3 font-medium",children:"Drop new logos"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"PNG, SVG or JPG up to 5MB."}),e.jsx("input",{id:"logo-upload",type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:s=>we(s,"logo")})]}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:R.map(s=>e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-border/60 bg-surface/60",children:[e.jsx("img",{src:s.url,alt:s.label,className:"h-32 w-full object-cover"}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsx("div",{className:"text-sm font-medium",children:s.label}),e.jsx(w,{variant:"ghost",size:"icon",className:"h-9 w-9 text-muted-foreground",onClick:()=>ke("logo",s.id),children:e.jsx(ae,{className:"h-4 w-4"})})]})]},s.id))})]})]}),e.jsxs(x,{className:"border-border/60",children:[e.jsxs(L,{children:[e.jsx(M,{children:"Photos & gallery"}),e.jsx(I,{children:"Store hero shots, press images, and behind-the-scenes captures for quick access."})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("label",{htmlFor:"photo-upload",className:"flex cursor-pointer flex-col items-center justify-center rounded-2xl border border-dashed border-border/80 bg-surface/40 p-6 text-center transition hover:border-secondary/60 hover:bg-surface/60",children:[e.jsx(ge,{className:"h-6 w-6 text-secondary"}),e.jsx("span",{className:"mt-3 font-medium",children:"Upload new photos"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"High-res PNG or JPG recommended."}),e.jsx("input",{id:"photo-upload",type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:s=>we(s,"photo")})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:O.map(s=>e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-border/60 bg-surface/60",children:[e.jsx("img",{src:s.url,alt:s.label,className:"h-40 w-full object-cover"}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:s.label}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.type==="photo"?"Creative":""})]}),e.jsx(w,{variant:"ghost",size:"icon",className:"h-9 w-9 text-muted-foreground",onClick:()=>ke("photo",s.id),children:e.jsx(ae,{className:"h-4 w-4"})})]})]},s.id))})]})]})]})}),e.jsxs(H,{value:"wardrobe",className:"space-y-8",children:[e.jsxs(x,{className:"border-border/60",children:[e.jsxs(L,{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx(M,{children:"Uniform presets"}),e.jsx(I,{children:"Choose the base outfit each persona uses by default. Upgrades sync from the Shop and Player Profile locker."})]}),e.jsx(w,{variant:"outline",onClick:()=>r("/shop"),children:"Open Shop"})]}),e.jsx(p,{className:"space-y-6",children:Ue.map(s=>{const a=ie[s.templateId];return e.jsxs("div",{className:"rounded-2xl border border-border/70 bg-background/60 p-5",children:[e.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-heading text-lg font-semibold",children:s.templateName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]}),e.jsxs(w,{variant:"ghost",size:"sm",className:"gap-2",onClick:()=>r(`/template/${s.templateId}`),children:["Preview template",e.jsx(Ee,{className:"h-4 w-4"})]})]}),e.jsx(cs,{value:a,onValueChange:l=>Ze(s.templateId,l),className:"mt-4 space-y-3",children:s.options.map(l=>{const y=`${s.templateId}-${l.id}`,C=a===l.id;return e.jsxs(D,{htmlFor:y,className:`flex cursor-pointer items-start gap-3 rounded-2xl border p-4 transition hover:border-secondary/60 hover:bg-secondary/10 ${C?"border-secondary/70 bg-secondary/10":"border-border/60 bg-surface/60"}`,children:[e.jsx(ds,{id:y,value:l.id,className:"mt-1"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:l.name}),e.jsx(J,{variant:l.tier==="free"?"secondary":"outline",children:l.tier.toUpperCase()})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:l.description})]})]},l.id)})})]},s.templateId)})})]}),e.jsxs(x,{className:"border-border/60",children:[e.jsxs(L,{children:[e.jsx(M,{children:"Wardrobe progression"}),e.jsx(I,{children:"Climb through wardrobe tiers to unlock premium looks curated for each moment in your journey."})]}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[e.jsx(Y,{value:He,className:"h-2 flex-1"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[se," of ",i.length," tiers unlocked"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Every brand kit you publish and every appearance you log pushes you closer to Icon Status. Keep building momentum!"})]})]}),e.jsx("div",{className:"grid gap-6 lg:grid-cols-3",children:i.map(s=>e.jsxs(x,{className:"border-border/60",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx(M,{children:s.name}),e.jsx(I,{children:s.description})]}),e.jsx(J,{variant:s.unlocked?"secondary":"outline",className:de("uppercase tracking-wide",s.unlocked?"bg-secondary/20 text-secondary-foreground":"border-border/70 text-muted-foreground"),children:s.unlocked?"Unlocked":"Locked"})]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:s.items.length?s.items.map(a=>e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-border/60 bg-surface/60 px-4 py-3 text-sm",children:[e.jsx("span",{children:a}),e.jsx(w,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground",onClick:()=>Qe(s.id,a),children:e.jsx(ae,{className:"h-4 w-4"})})]},`${s.id}-${a}`)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No outfits added yet. Unlock the tier to start styling."})}),s.unlocked?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{value:j[s.id]??"",onChange:a=>_(l=>({...l,[s.id]:a.target.value})),placeholder:"Add a new look"}),e.jsxs(w,{type:"button",variant:"secondary",onClick:()=>Ke(s.id),className:"gap-2",children:[e.jsx(me,{className:"h-4 w-4"}),"Add"]})]}):e.jsx(w,{type:"button",variant:"outline",className:"w-full",onClick:()=>Je(s.id),children:"Unlock tier"})]})]},s.id))})]}),e.jsxs(H,{value:"brands",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading text-2xl font-semibold",children:"Saved brand kits"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"All of your generated, saved, or favourited brands live here. Jump back in to update or export in seconds."})]}),e.jsxs(w,{variant:"secondary",className:"gap-2",onClick:()=>r("/create"),children:[e.jsx(me,{className:"h-4 w-4"}),"Create new brand"]})]}),E?e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:3}).map((s,a)=>e.jsx("div",{className:"h-48 animate-pulse rounded-2xl border border-border/60 bg-surface/60"},a))}):P.length?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-3",children:P.map(s=>e.jsx(x,{className:"border-border/60",children:e.jsxs(p,{className:"space-y-4 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-heading text-xl font-semibold",children:s.title||"Untitled Brand"}),s.tagline&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.tagline})]}),e.jsx(w,{variant:"ghost",size:"icon",onClick:()=>_e(s.id),className:de("h-9 w-9 rounded-full border border-transparent",T.includes(s.id)?"text-yellow-400":"text-muted-foreground"),children:e.jsx(pe,{className:de("h-4 w-4",T.includes(s.id)&&"fill-current")})})]}),s.logo_url&&e.jsx("div",{className:"overflow-hidden rounded-xl border border-border/60",children:e.jsx("img",{src:s.logo_url,alt:`${s.title} logo`,className:"h-32 w-full object-cover"})}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx(J,{variant:"outline",className:"uppercase tracking-wide",children:s.format_preset||"custom"}),e.jsx("span",{className:"text-muted-foreground",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{className:"flex-1",onClick:()=>r(`/brand/${s.id}`),children:"Open brand"}),e.jsxs(w,{variant:"outline",onClick:()=>_e(s.id),className:"gap-2",children:[e.jsx(pe,{className:de("h-4 w-4",T.includes(s.id)&&"fill-current text-yellow-400")}),T.includes(s.id)?"Favourited":"Favourite"]})]})]})},s.id))}):e.jsx(x,{className:"border-dashed border-border/60 bg-surface/60",children:e.jsxs(p,{className:"flex flex-col items-center gap-4 py-12 text-center",children:[e.jsx(pe,{className:"h-10 w-10 text-muted-foreground"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-heading text-xl",children:"No brand kits yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate a brand to see it appear in your profile. We’ll keep your favourites pinned here."})]}),e.jsxs(w,{onClick:()=>r("/create"),className:"gap-2",children:[e.jsx(me,{className:"h-4 w-4"}),"Start your first brand"]})]})})]})]})})]})};export{Ut as default};
